function ControllerModule(){this._active=false;this._visible=false;this._view=null;this._model=null;this._canvas=null;this._name="ControllerModule";this._activeListeners=false;this.myMouseListener=function(){};this.myTouchListener=function(){};document.addEventListener("init",this.init)}ControllerModule.prototype={init:function(a){this._canvas=window.gameObj.getCanvas()},set visible(a){this._visible=a;if(this._visible){window.DisplayList.registerView(this._view)}else{this.close()}},get visible(){return(this._visible)},close:function(a){this._visible=false;this.isActive=false;window.DisplayList.deleteView(this._view)},get isActive(){return(this._active)},set isActive(a){if(a&&this._model._loaded==undefined){this.setUpLoadListener();return}this._active=a;if(this._active){console.log("Module is active ---- Line 67 ControllerModule.js");if(!this._visible){this.visible=true}this.addListeners()}else{console.log(" --> is now inactive line 72 ControllerModule.js");this.removeListeners();this._view.eraseScreenElements()}},testListener:function(){console.log("TestListener called")},addListeners:function(){console.log("Adding Event Listeners");if(!this._activeListeners){this.myMouseListener=this.canvasListener.bind(this);this.myTouchListener=this.touch.bind(this);document.body.addEventListener("mousedown",this.myMouseListener,false);document.body.addEventListener("touchstart",this.myTouchListener,false);document.body.addEventListener("mouseup",this.myMouseListener,false);document.body.addEventListener("touchend",this.myTouchListener,false);this._activeListeners=true}},removeListeners:function(){console.log("Removing Event Listeners");document.body.removeEventListener("mousedown",this.myMouseListener,false);document.body.removeEventListener("touchstart",this.myTouchListener,false);document.body.removeEventListener("mouseup",this.myMouseListener,false);document.body.removeEventListener("touchend",this.myTouchListener,false);this._activeListeners=false},setUpLoadListener:function(){this.listenerInt=setInterval((function(){if(this._model._loaded){clearInterval(this.listenerInt);this.isActive=true}}).bind(this),1000)},touch:function(b){var a=this._canvas.getBoundingClientRect();var c=b.changedTouches[0];x=Math.round((c.pageX-a.left)/(a.right-a.left)*this._canvas.width);y=Math.round((c.pageY-a.top)/(a.bottom-a.top)*this._canvas.height);this._view.testHit(x,y,b)},canvasListener:function(b){var a=HUDCanvas.getBoundingClientRect();x=Math.round((b.clientX-a.left)/(a.right-a.left)*HUDCanvas.width);y=Math.round((b.clientY-a.top)/(a.bottom-a.top)*HUDCanvas.height);console.log("Going to test due to an event of type "+b.type+"  this is "+this._name);this._view.testHit(x,y,b)},draw:function(a){window.DisplayList.draw()}};console.log("ControllerModule loaded");var DataModule=function(){this._data="empty";this._controller=null;this._name="DataModule";this._loaded=false;this._status=null};DataModule.prototype={loadData:function(b){this.callBack=b;var a=[];this.status=0;me=this;$.getJSON(this._retrievalURL,function(c){me.dataReturned(c)})},dataReturned:function(a){this._data=a;this._status=1;this.digestData()},digestData:function(){console.log("Digest Data called on Super Class DataModule")}};console.log("DataModule.js loaded");var ViewModule=function(){this.controller;this._context;this.screenElements=[];this.buttons=[];this._displayNum,this._top=60;this._left=0;this.imgWidth=160;this.imgHeight=120;this.colMax=3;this.imagePadding=5;this.active=false;this._visible=false;this._yOffset=0;this._name="ViewModule";this._displayState="";this.testHit=this.testHitFunc;this._clickedButton=null;this._imagesNeedingLoaded=[]};ViewModule.prototype={eraseScreenElements:function(){console.log("--------- Erasing Screen Elements");this.screenElements=[];this.buttons=[]},init:function(){this._context=HUDctx;this._left=(HUDCanvas.width-this.bgWidth)/2},testHitFunc:function(a,d,b){var c=this;console.log("ViewModule testHitFunc");if(this.controller.isActive&&window.globalActive){this.buttons.forEach(function(e){if(d>e._y&&d<e._y+e._height&&a>e._x&&a<e._x+e._width){if(b.type=="mousedown"||b.type=="touchstart"){window._clickedButton=e._name}if(b.type=="mouseup"||b.type=="touchstart"){if(window._clickedButton==e._name){e.callBack(e.props)}}return}})}},loadView:function(){},draw:function(){console.log("Calling Draw on Superclass")},imageLoaded:function(a){console.log("IMG loaded [ "+a+"]  _name ["+a._name+"]");for(i=0;i<this._imagesNeedingLoaded.length;i++){if(this._imagesNeedingLoaded[i]._name==a._name){this._imagesNeedingLoaded.splice(i,1);console.log("Removing "+a._name+" from imagesNeedingLoaded array.  "+this._imagesNeedingLoaded.length+" left to load.");a.draw()}}}};