/*cache-key: m.gamesgames.com/game/show/js/56c5e6c526ddb429b84aaddc3f3cc492/spilgames.js *** cache-time: Tue, 03 Jul 2012 14:47:12 +0200 *** cache-ttl: 315360000*/

SpilGames.createElement=function(a){if(a.indexOf("<fb:")>=0)return a=document.createElement("fb:login-button"),a.innerHTML="login",a;var b={innerHTML:/<([a-z][a-z0-9]*)(\b[^>]*)>(.*?)$/i,singleElement:/<?([a-z][a-z0-9]*)(\b[^>]*>)?/i},d,c,f,e;for(e in b)if(c=b[e].exec(a)){f=e;break}switch(f){case "innerHTML":d=document.createElement(c[1]);c[2].replace(/([^\s=]+)\s*=\s*(\'[^<\']*\'|"[^<"]*")/g,function(a){a=a.split(/=['"]/);d.setAttribute(_SG.trim(a[0]),_SG.trim(a[1],"'\\\"\\s"))});if(a=c[3].slice(0,
c[3].length-(3+c[1].length)))d.innerHTML=a;break;case "singleElement":d=document.createElement(c[1])}return d};SpilGames.createOrGetElement=function(a){return typeof a==="object"?a:typeof a==="string"&&a.indexOf("<")===0?SpilGames.createElement(a):typeof a==="string"?document.getElementById(a):null};SpilGames.findClosest=function(a,b){return!b.parentNode?null:b.parentNode.tagName.toLowerCase()===a?b.parentNode:SpilGames.findClosest(a,b.parentNode)};
SpilGames.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};SpilGames.isEmpty=function(a){if(SpilGames.isArray(a)||typeof a==="string")return a.length===0;for(var b in a)if(hasOwnProperty.call(a,b))return!1;return!0};SpilGames.createId=function(a){return"spilgames-"+a};SpilGames.createClassName=function(a){return"spilgames-"+a};


SpilGames.rtrim=function(b,a){return b.replace(RegExp("["+(a||"\\s")+"]+$","g"),"")};SpilGames.ltrim=function(b,a){return b.replace(RegExp("^["+(a||"\\s")+"]+","g"),"")};SpilGames.trim=function(b,a){a=a||"\\s";return b.replace(RegExp("^["+a+"]+|["+a+"]+$","g"),"")};


(function(){function e(a,c,b){this.name=a;this.template=b;this.version=c}var d={_templates:{},register:function(a,c,b){d._templates[a]=new e(a,c,b)},render:function(a,c,b){(b||function(){})();a=d._templates[a];if(a.version==="dom")return typeof a.template==="function"?a.template():a.template;else alert("todo")}};SpilGames.append(SpilGames,{Templates:d})})(SpilGames);


SpilGames.l18n=new l18n;function l18n(){var a={msgid:[],msgidplurals:[],msgstr:[]};this.load=function(b){_SG.append(a,b)};this.gettext=function(b){var c=a.msgid.indexOf(b),e=b;c>=0&&a.msgstr[c]&&(e=a.msgstr[c]);var d=0,f=arguments;return e.replace(/%s/g,function(a){d++;return f[d]?f[d]:a})};this.ngettext=function(){}}_SG.append(_SG,{_:_SG.l18n.gettext});


(function(c){var e={email:"email",input:"input",select:"select",radio:"radio",checkbox:"checkbox",password:"password",html:"html",submit:"submit",containerInfo:"containerInfo"},r={ascii:{isValid:function(c){return!/[^a-zA-Z0-9]/.test(c.value)},message:c._("This value contains invalid input.")},required:function(f){f=f||c._("This field is required.");return{isValid:function(c){return c.value!=""},message:f}},email:{isValid:function(c){return/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+(?:[A-Z]{2}|com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|museum)$/i.test(c.value)},
message:c._("That email address isn't right. Try again.")},matchPassword:{isValid:function(f){return document.getElementById(c.createId("password")).value===f.value},message:c._("Those passwords don't match. Try again.")},requiredRadio:function(f){return{isValid:function(d){d=c.findClosest("form",d)[d.name];for(i=0;i<d.length;i++)if(d[i].checked==!0)return!0;return!1},message:f||c._("Please select a value.")}},username:{isValid:function(c){return c.value.length>=3},message:c._("Your username has to be at least 3 characters long.")},
password:{isValid:function(c){return c.value.length>=6},message:c._("Your password has to be at least 6 characters long.")},dateValidator:function(e,d,n){return{isValid:function(){var h=document.getElementById(c.createId(e)).value,j=document.getElementById(c.createId(d)).value,a=document.getElementById(c.createId(n)).value,b=new Date(a,j,h);return b.getFullYear()==a&&b.getMonth()==j&&b.getDate()==h||!h||!j||!a},message:c._("Please enter a valid date")}},oldEnough:function(e,d,n){return{isValid:function(){var h=
document.getElementById(c.createId(e)).value,j=document.getElementById(c.createId(d)).value,a=document.getElementById(c.createId(n)).value;return h&&j&&a?new Date(a,j,h)<new Date((new Date).getFullYear()-14,1,1):!0},message:c._("Sorry! You are still too young to play on this site without permission.")}}},k={Form:function(f){var d=this;this.errors=[];this.customErrors=[];this.validators={};this.onsubmitHandlers=[];this.onInvalidHandlers=[];this.containsErrors=!1;this.fields={};this.notifications=[];
this.form={};var n=function(a){if(d.validate())for(var b=0;b<d.onsubmitHandlers.length;b++)d.onsubmitHandlers[b](d);else for(b=0;b<d.onInvalidHandlers.length;b++)d.onInvalidHandlers[b](d);a.preventDefault()},h=function(a,b){if(a.indexOf(",")<0)var c=parseInt(a.split(/\.\./)[0],10),d=parseInt(a.split(/\.\./)[1],10);else var e=a.split(/,/g),d=e.length-1,c=0;var p="";b&&(p="<option value=''>"+b+"</option>");if(d<c)for(;c>=d;c--){var g=a.indexOf(",")<0?"<option value='"+c+"'>"+c+"</option>":"<option value='"+
c+"'>"+e[c]+"</option>";p+=g}else for(;c<=d;c+=1)g=a.indexOf(",")<0?"<option value='"+c+"'>"+c+"</option>":"<option value='"+c+"'>"+e[c]+"</option>",p+=g;return p},j=function(a){var b;switch(a.type){case e.input:b=document.createElement("input");b.setAttribute("type","text");break;case e.email:b=document.createElement("input");b.setAttribute("type","email");break;case e.select:b=document.createElement("select");if(a.range)b.innerHTML=h(a.range,a.empty);break;case e.radio:b=document.createElement("input");
b.setAttribute("type","radio");break;case e.checkbox:b=document.createElement("input");b.setAttribute("type","checkbox");break;case e.password:b=document.createElement("input");b.setAttribute("type","password");break;case e.submit:b=document.createElement("input");b.setAttribute("type","submit");break;case e.html:b=SpilGames.createElement(a.content)}a.type!=e.html?a.type!=e.radio?d.fields[a.id]=function(a){return function(){return a.value}}(b):a.type==e.radio&&(d.fields[a.name]=function(a){return function(){var b=
d.form[a],c="";for(i=0;i<b.length;i++)if(b[i].checked==!0)c=b[i].value;return c}}(a.name)):d.fields[a.id]=function(a){return function(){return a}}(b);a.type!=e.html?(b.setAttribute("name",a.name),b.setAttribute("id",c.createId(a.id)),a.placeholder&&b.setAttribute("placeholder",a.placeholder),a.defaultValue&&b.setAttribute("value",a.defaultValue)):a.id&&b.setAttribute("id",c.createId(a.id));if(a.label){var l=document.createElement("label");l.setAttribute("for",c.createId(a.id));var o=document.createTextNode(a.label);
if(a.type==e.checkbox||a.type==e.radio)l.appendChild(b),l.appendChild(o),b=l}d.validators[a.id]=typeof a.validation!="undefined"?c.isArray(a.validation)?a.validation:[a.validation]:[];typeof a.id!="undefined"&&(d.errors[a.id]=[],d.customErrors[a.id]=[]);return b};(function(a){var b=a.containerHtml||"<ul></ul>",l=a.rowHtml||"<li></li>",o=a.postfix||"FormElementContainer",f=document.createElement("form");f.setAttribute("class","jsForm");f.setAttribute("action",a.action);f.setAttribute("method",a.method);
typeof a.onSubmit!="undefined"&&d.onsubmitHandlers.push(a.onSubmit);f.onsubmit=n;b=SpilGames.createElement(b);f.appendChild(b);for(var h=0;h<a.fields.length;h++){var g=a.fields[h];if(!SpilGames.isEmpty(g)){var m=SpilGames.createElement(l);if(g.id)m.id=c.createId(g.id+o);if(g.hidden)m.style.display="none";if(c.isArray(g)){var k=0;if(g[0].type===e.containerInfo&&(k=1,g[0].id))m.id=c.createId(g[0].id+o);for(;k<g.length;k++){var q=j(g[k]);m.appendChild(q)}}else q=j(g),m.appendChild(q);b.appendChild(m)}}d.form=
f})(f);this.get=function(){return this.form};this.validate=function(){this.clearErrors();for(var a in this.validators){for(var b=document.getElementById(c.createId(a)),d=this.validators[a],e=0;e<d.length;e++)d[e].isValid(b)||this.errors[a].push(d[e].message);this.errors[a]&&(this.errors[a]=this.errors[a].concat(this.customErrors[a]),this.customErrors[a]=[])}this.showErrors();this.containsErrors&&window.scroll(0,0);return!this.containsErrors};this.showErrors=function(){for(var a in this.errors)if(this.errors[a].length>
0){this.containsErrors=!0;var b=SpilGames.findClosest("li",document.getElementById(c.createId(a)));b.setAttribute("class","error");var d=this.printErrors(this.errors[a]);if(d){var e=document.createElement("span");e.setAttribute("class","errorLabel");e.innerHTML=d;b.appendChild(e)}}};this.clearErrors=function(){this.containsErrors=!1;var a=document.getElementsByClassName("errorLabel");if(a)for(var b=0;b<a.length;b++)a[b].parentNode.setAttribute("class",""),a[b].parentNode.removeChild(a[b]);for(var c in this.errors)this.errors[c]=
[];a=document.getElementsByClassName("li.error");for(b=0;b<a.length;b++)a[b].setAttribute("class","")};this.printErrors=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c],c!=a.length-1&&(b+=", ");return b}}};k.ContentType=e;k.Method={get:"get",post:"post"};k.Validation=r;c.append(c,{Forms:k})})(SpilGames);


(function(b){b.append(b,{Popup:function(c,e){var a=this;this.isDeleted=!1;var d={target:function(){var a=document.createElement("div");a.id="wrapper";return a}(),contentContainer:null,closeButton:"",isForm:!1,overlay:null};c.callback=e||c.callback||function(){};this.options=b.append(d,c);this.options.target.style.display="none";document.body.appendChild(this.options.target);d=_SG.createOrGetElement(this.options.contentContainer)||this.options.target;this.options.content&&d.appendChild(this.options.content);
this.options.overlay=typeof this.options.overlay==="string"?document.getElementById(this.options.overlay):this.options.overlay;if(this.options.overlay)this.options.overlay.style.height=document.height+"px";this.show=function(){if(a.options.overlay)a.options.overlay.style.display="block";a.options.target.style.display="block"};this.close=function(){a.options.target.style.display="none";a.options.callback()};this.remove=function(){a.options.target.parentNode.removeChild(a.options.target);a.isDeleted=
!0}}})})(SpilGames);


(function(e){var a={_currentActivePopup:null,_popups:{},_createdPopups:{},show:function(b){var d=typeof b==="string"?b:b.name;a._currentActivePopup&&a._currentActivePopup.remove();var c=a._createdPopups[d];if(!c||c.isDeleted)c=a._popups[d](b);a._createdPopups[d]=c;c.show();a._currentActivePopup=c},register:function(b,d){a._popups[b]=d}};e.append(e,{PopupManagement:a})})(SpilGames);


(function(a){var f=a.Forms.Validation,b=a.Forms.ContentType;a.Templates.register("changePassword","dom",function(){var g=document.createElement("div");g.id=a.createId("wrapperPop");var c=document.createElement("span");c.innerText=a._("Close");c.className=a.createClassName("closeButton");c.id=a.createId("popupCloseButton");var d=document.createElement("div");d.id=a.createId("shadow");var b=document.createElement("div");b.appendChild(d);b.appendChild(g);d=document.createElement("div");d.id=a.createId("inner");
g.appendChild(c);g.appendChild(d);return g});a.Templates.register("signupSuccessful","dom",function(){var g=document.createElement("div");g.id=a.createId("wrapperAlert");var c=document.createElement("span");c.innerText=a._("Close");c.id=a.createId("popupCloseButton");c.className=a.createClassName("closeButton");var b=document.createElement("div");b.id=a.createId("wrapperAlertShadow");var e=document.createElement("div");e.appendChild(b);e.appendChild(g);b=document.createElement("div");b.id=a.createId("inner");
var h=document.createElement("p"),f=document.createTextNode(a._("Registration successful!")),i=document.createElement("a");i.innerHTML=a._("OK");i.id=a.createId("popupCloseLink");b.appendChild(h);b.appendChild(i);h.appendChild(f);g.appendChild(c);g.appendChild(b);return e});a.Templates.register("signup","dom",function(){var b=document.createElement("div");b.id=a.createId("signupShadow");var c=document.createElement("div");c.id=a.createId("wrapperSignup");var d=document.createElement("div");d.id=a.createId("header");
var e=document.createElement("a");e.id=a.createId("wrapperSignup-logo");var h=document.createElement("div");h.className=a.createClassName("closeBox");var f=document.createElement("a");f.id=a.createId("popupCloseLink");f.innerText=a._("Close");b.appendChild(c);c.appendChild(d);d.appendChild(e);d.appendChild(h);h.appendChild(f);return b});a.Templates.register("login","dom",function(){var b=document.createElement("div");b.id=a.createId("wrapperPop");var c=document.createElement("span");c.innerText=a._("Close");
c.className=a.createClassName("closeButton");c.id=a.createId("popupCloseButton");var d=document.createElement("div");d.id=a.createId("shadow");d.className=a.createClassName("shadow");var e=document.createElement("div");e.id=a.createId("inner");b.appendChild(c);b.appendChild(e);c=document.createElement("div");c.appendChild(d);c.appendChild(b);return c});a.Templates.register("requestPassword","dom",function(){var b=document.createElement("div");b.id=a.createId("wrapperPop");var c=document.createElement("span");
c.innerText=a._("Close");c.id=a.createId("popupCloseButton");c.className=a.createClassName("closeButton");var d=document.createElement("div");d.id=a.createId("shadow");var e=document.createElement("div");e.id=a.createId("inner");b.appendChild(c);b.appendChild(e);c=document.createElement("div");c.appendChild(d);c.appendChild(b);return c});var l={title:"requestPassword",action:"",method:a.Forms.Method.post,fields:[{type:b.html,content:"<h2>"+a._("Forgot your password?")+"</h2>"},{type:b.html,content:"<p>"+
a._("Please enter your email address to request a new password.")+"</p>"},{type:b.input,name:"email",id:"email",placeholder:""+a._("Your Email"),defaultValue:"",validation:f.email},{type:b.submit,defaultValue:a._("Send"),name:"passwordRequest",id:"passwordRequest"}]},m={title:"changePassword",action:"",method:a.Forms.Method.post,fields:[{type:b.html,content:"<h2>"+a._("Change your password")+"</h2>"},{type:b.html,content:"<p>"+a._("Please enter a new password.")+"</p>"},{type:b.password,name:"password",
id:"password",defaultValue:"",placeholder:a._("Your Password"),validation:f.none},{type:b.password,name:"passwordMatch",id:"passwordMatch",defaultValue:"",placeholder:a._("Repeat Password"),validation:f.matchPassword},{type:b.submit,defaultValue:a._("Send"),name:"passwordRequest",id:"passwordRequest"}]},n={action:"",method:a.Forms.Method.get,fields:[{type:b.html,content:"<h2>"+a._("Join (It's free!)")+"</h2>"},{type:b.html,content:'<p class="error">'+a._("Something went wrong.")+"</p>",id:"errorContainer",
hidden:!0},{type:b.input,name:"email",id:"email",placeholder:a._("Your Email"),defaultValue:"",validation:f.email},{type:b.input,name:"username",id:"username",placeholder:a._("Your Username"),defaultValue:"",validation:f.username},{type:b.password,name:"password",id:"password",defaultValue:"",placeholder:a._("Your Password"),validation:f.password},{type:b.password,name:"passwordMatch",id:"passwordMatch",defaultValue:"",placeholder:a._("Repeat Password"),validation:[f.password,f.matchPassword]},[{type:b.html,
content:"<span>"+a._("I am a")+":</span>"},{type:b.radio,name:"gender",id:"female",defaultValue:"f",label:a._("Girl")},{type:b.radio,name:"gender",id:"male",defaultValue:"m",label:a._("Boy"),validation:f.requiredRadio(a._("I am a")+"...")}],[{type:b.html,content:"<span>"+a._("Birthdate")+":</span>"},{type:b.select,name:"day",range:"1..31",empty:a._("Day"),id:"day",validation:[f.oldEnough("day","month","year"),f.dateValidator("day","month","year"),f.required(a._("What day were you born?"))]},{type:b.select,
name:"month",range:"".concat([a._("January"),a._("February"),a._("March"),a._("April"),a._("May"),a._("June"),a._("July"),a._("August"),a._("September"),a._("October"),a._("November"),a._("December")]),empty:a._("Month"),id:"month",validation:f.required(a._("What month were you born?"))},{type:b.select,name:"year",range:(new Date).getFullYear()+".."+((new Date).getFullYear()-100),empty:a._("Year"),id:"year",validation:f.required(a._("What year were you born?"))}],{type:b.submit,defaultValue:a._("Sign me up!"),
name:"signup",id:"signup"}],onSubmit:function(){},rowHtml:"<li></li>",containerHtml:"<ul></ul>"},o={action:"",method:a.Forms.Method.get,fields:[{type:b.html,content:"<h2>"+a._("Sign In")+"</h2>"},{type:b.html,content:'<p class="error">'+a._("Oops! Password or username is incorrect!")+"</p>",id:"errorContainer",hidden:!0},{type:b.input,name:"username",id:"username",placeholder:a._("Username"),label:"username",defaultValue:""},{type:b.password,name:"password",id:"password",placeholder:a._("Password"),
defaultValue:""},{type:b.checkbox,name:"rememberMe",id:"rememberMe",placeholder:"rememberMe",label:a._("Remember me"),hidden:!0},{type:b.submit,defaultValue:a._("Sign In"),name:"signin",id:"signin"},[{type:b.containerInfo,id:"noMember"},{type:b.html,content:"<hr>"},{type:b.html,id:"noMember",content:"<p>"+a._("Not a member yet?")+"</p>"}],{},{type:b.html,content:'<a id="signup" href="javascript:SpilGames.UserManagement.show(\'signup\');">'+a._("Sign up for free!")+"</a>",name:"signup",id:"signup"}],
onSubmit:function(){},rowHtml:"<li></li>",containerHtml:"<ul></ul>"},j=function(){var a=document.getElementsByClassName("loginbox");if(a&&a.length>0)a[0].style.display="none";SpilGames.Users.getCurrentUser({onsuccess:function(a){var b=a.uid,a=a.pic_square;document.getElementById("content")!==null&&document.getElementById("content")!==void 0&&(showLogoutBox(b),setAvatar(a))},onfailure:function(a){SpilGames.Debug.log(a)}})};a.PopupManagement.register("requestPassword",function(){try{_gaq.push(["_trackEvent",
"Signup and Signin","request Password",window.location.pathname,null,!0])}catch(b){}var c=new a.Forms.Form(l),d=new a.Popup({content:c.get(),target:a.Templates.render("requestPassword"),contentContainer:a.createId("inner"),overlay:a.createId("shadow")});document.getElementById(a.createId("popupCloseButton")).onclick=d.close;c.onsubmitHandlers.push(function(){});return d});a.PopupManagement.register("login",function(b){try{_gaq.push(["_trackEvent","Signup and Signin","login",window.location.pathname,
null,!0])}catch(c){}var d=b||{};d.closecallback=b.closecallback||function(){};var e=new a.Forms.Form(o),h=this.popup=new a.Popup({content:e.get(),target:a.Templates.render("login"),contentContainer:a.createId("inner"),overlay:a.createId("shadow"),callback:b.closecallback});document.getElementById(a.createId("popupCloseButton")).addEventListener("click",function(a){a.preventDefault();a.stopPropagation();h.close()},!1);var f=this;e.onsubmitHandlers.push(function(a){a.fields.rememberMe();d.callback({username:a.fields.username(),
password:a.fields.password(),scope:f,onsuccess:function(){try{_gaq.push(["_trackEvent","Signup and Signin","login successfull",window.location.pathname,null,!0])}catch(a){}j();this.popup.close()},onfailure:function(){e.containsErrors=!0;e.fields.errorContainer().parentNode.style.display="block";e.customErrors.username.push("");e.customErrors.password.push("");e.validate()}})});return this.popup});a.PopupManagement.register("signup",function(){try{_gaq.push(["_trackEvent","Signup and Signin","signup",
window.location.pathname,null,!0])}catch(b){}var c=new a.Forms.Form(n),d=new a.Popup({content:c.get(),target:a.Templates.render("signup"),contentContainer:a.createId("wrapperSignup"),overlay:a.createId("signupShadow")});document.getElementById(a.createId("popupCloseLink")).onclick=d.close;var e=function(b){var d="",d=b.code==409?a._(b.element+" already exist"):b.code==400?a._("Invalid Request"):b.code==406?a._("Content not accepted by the server."):b.code==503?a._("Unavailable"):a._("Unknown Error");
c.customErrors[b.element].push(d)};c.onInvalidHandlers.push(function(){document.getElementById(a.createId("errorContainerFormElementContainer")).style.display="block"});c.onsubmitHandlers.push(function(b){var d=b.fields.year()+"-"+(parseInt(b.fields.month(),10)+1)+"-"+b.fields.day();a.Head.include("plugin.registration",function(){a.Registration.register({data:{username:b.fields.username(),password:b.fields.password(),email:b.fields.email(),gender:b.fields.gender(),dob:d},onsuccess:function(){j();
k.show("signupSuccessful");window.scroll(0,0);a.Users.getCurrentUser({onsucces:function(){},onfailure:function(){}})},onfailure:function(){errors=this.response;if(a.isArray(errors))for(var b=0;b<errors.length;b++)e(errors[b]);else e(errors);c.validate()}})})});return d});a.PopupManagement.register("signupSuccessful",function(){try{_gaq.push(["_trackEvent","Signup and Signin","signup successfull",window.location.pathname,null,!0])}catch(b){}var c=new a.Popup({content:null,target:a.Templates.render("signupSuccessful"),
overlay:a.createId("wrapperAlertShadow")});document.getElementById(a.createId("popupCloseButton")).onclick=c.close;document.getElementById(a.createId("popupCloseLink")).onclick=c.close;return c});a.PopupManagement.register("changePassword",function(){try{_gaq.push(["_trackEvent","Signup and Signin","change password",window.location.pathname,null,!0])}catch(b){}var c=new a.Forms.Form(m),c=new a.Popup({content:c.get(),target:a.Templates.render("changePassword"),contentContainer:a.createId("inner"),
overlay:a.createId("shadow")});document.getElementById(a.createId("popupCloseButton")).onclick=c.close;return c});var k={show:function(b){a.PopupManagement.show(b)},closeLoginBox:j};a.append(a,{UserManagement:k})})(SpilGames);


SpilGames.Ajax=function(a,c,e,f){return new Ajax(a||{},c||_SG.Errors.nocallback,e||_SG.Errors.nocallback,f||function(){})};_SG.Settings.setDefault("xhr",XHR);_SG.Settings.setDefault("xhrSettings",{url:"/",data:{},method:"GET",async:!0,user:"",password:"",requestHeaders:{},dataType:"text",dataMerge:!1,requestHeadersMerge:!1});
function XHR(){var a;if(window.XMLHttpRequest)a=new XMLHttpRequest;else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}return a}
function Ajax(a,c,e,f){var b=this,g=c||_SG.Errors.nocallback,h=e||_SG.Errors.nocallback,i=f||_SG.Errors.nocallback;this._xhr=new (_SG.Settings.get("xhr"));this._params=a||{};this._url=this._params.url||"/";this._data=this._params.data||{};this._method=this._params.method||"GET";this._async=this._params.async||!0;this._user=this._params.user||"";this._password=this._params.password||"";this._requestHeaders=this._params.requestHeaders||{};this._dataType=this._params.dataType||"text";this._parseData=
function(){var d="";if(typeof this._data=="object")for(var a in this._data)d!==""&&(d+="&"),d+=encodeURIComponent(a)+"=",d+=typeof this._data[a]=="object"?encodeURIComponent(_SG.JSON.stringify(this._data[a])):this._data[a];else d=this._data;d===""&&(d=null);return d};this._addHeaders=function(){this._method.toLowerCase()=="post"&&(this._requestHeaders["Content-type"]=this._requestHeaders["Content-type"]||"application/x-www-form-urlencoded");this._parseData()!==null&&this._parseData();for(var a in this._requestHeaders)this._xhr.setRequestHeader(a,
this._requestHeaders[a])};this._parseDataType=function(a){var c;switch(b._dataType.toLowerCase()){case "json":try{c=_SG.JSON.parse(a)}catch(e){c={jsonParseError:a}}break;default:c=a}g(c,b._xhr)};this._xhr.onreadystatechange=function(){i(b._xhr.readyState,b._xhr);b._xhr.readyState==4&&(b._xhr.status==200?b._parseDataType(b._xhr.responseText):h(b._xhr.status,b._xhr))};this._xhr!==null?(a=null,this._method.toLowerCase()=="post"?a=this._parseData():this._parseData()!=null&&(this._url+=/\?/.test(this._url)?
"&"+this._parseData():"?"+this._parseData()),this._xhr.open(this._method,this._url,this._async,this._user,this._password),this._addHeaders(),this._xhr.send(a)):g({})};


(function(){function r(a,c){var b;this.wrapper=typeof a=="object"?a:document.getElementById(a);if(this.wrapper!==null){this.wrapper.style.overflow="hidden";this.scroller=this.wrapper.children[0];this.scroller.style.cssText+="-webkit-transition-property:-webkit-transform;-webkit-transform-origin:0 0;-webkit-transform:"+j+"0,0"+k;this.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;";this.options={hScroll:!0,vScroll:!0,bounce:i,
bounceLock:!1,momentum:i,lockDirection:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:t,fadeScrollbar:s&&i||!g,hideScrollbar:s||!g,scrollbarClass:"",onScrollStart:null,onScrollEnd:null};for(b in c)this.options[b]=c[b];this.options.hScrollbar=this.options.hScroll&&this.options.hScrollbar;this.options.vScrollbar=this.options.vScroll&&this.options.vScrollbar;this.refresh();this._bind(o,window);this._bind(p)}}r.prototype={x:0,y:0,handleEvent:function(a){switch(a.type){case p:this._start(a);break;case l:this._move(a);
break;case m:case n:this._end(a);break;case "webkitTransitionEnd":this._transitionEnd(a);break;case o:this._resize()}},_scrollbar:function(a){var c=document,b;if(this[a+"Scrollbar"]){if(!this[a+"ScrollbarWrapper"]){b=c.createElement("div");this.options.scrollbarClass?b.className=this.options.scrollbarClass+a.toUpperCase():b.style.cssText="position:absolute;z-index:100;"+(a=="h"?"height:7px;bottom:1px;left:2px;right:7px":"width:7px;bottom:7px;top:2px;right:1px");b.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+
(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1");this.wrapper.appendChild(b);this[a+"ScrollbarWrapper"]=b;b=c.createElement("div");if(!this.options.scrollbarClass)b.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+(a=="h"?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;");b.style.cssText+=
"pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+j+"0,0"+k;this[a+"ScrollbarWrapper"].appendChild(b);this[a+"ScrollbarIndicator"]=b}a=="h"?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=h.max(h.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",
this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=h.max(h.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY);
this._indicatorPos(a,!0)}else if(this[a+"ScrollbarWrapper"])this[a+"ScrollbarIndicator"].style.webkitTransform="",this[a+"ScrollbarWrapper"].parentNode.removeChild(this[a+"ScrollbarWrapper"]),this[a+"ScrollbarWrapper"]=null,this[a+"ScrollbarIndicator"]=null},_resize:function(){var a=this;setTimeout(function(){a.refresh()},0)},_pos:function(a,c){this.x=this.hScroll?a:0;this.y=this.vScroll?c:0;this.scroller.style.webkitTransform=j+this.x+"px,"+this.y+"px"+k;this._indicatorPos("h");this._indicatorPos("v")},
_indicatorPos:function(a,c){var b=a=="h"?this.x:this.y;if(this[a+"Scrollbar"])b*=this[a+"ScrollbarProp"],b<0?(b=this.options.fixedScrollbar?0:b+b*3,this[a+"ScrollbarIndicatorSize"]+b<9&&(b=-this[a+"ScrollbarIndicatorSize"]+8)):b>this[a+"ScrollbarMaxScroll"]&&(b=this.options.fixedScrollbar?this[a+"ScrollbarMaxScroll"]:b+(b-this[a+"ScrollbarMaxScroll"])*3,this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-b<9&&(b=this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-8)),this[a+"ScrollbarWrapper"].style.webkitTransitionDelay=
"0",this[a+"ScrollbarWrapper"].style.opacity=c&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style.webkitTransform=j+(a=="h"?b+"px,0":"0,"+b+"px")+k},_transitionTime:function(a){a+="ms";this.scroller.style.webkitTransitionDuration=a;if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionDuration=a;if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionDuration=a},_start:function(a){var c=g?a.changedTouches[0]:a,b;this.moved=!1;a.preventDefault();this.moved=
!1;this.returnTime=this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this._transitionTime(0);if(this.options.momentum&&(b=new WebKitCSSMatrix(window.getComputedStyle(this.scroller,null).webkitTransform),b.m41!=this.x||b.m42!=this.y))this._unbind("webkitTransitionEnd"),this._pos(b.m41,b.m42);this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";
if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";this.startX=this.x;this.startY=this.y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=a.timeStamp;this.options.onScrollStart&&this.options.onScrollStart.call(this);this._bind(l);this._bind(m);this._bind(n)},_move:function(a){if(!(g&&a.touches.length>1)){var c=g?a.changedTouches[0]:a,b=c.pageX-this.pointX,d=c.pageY-this.pointY,e=this.x+b,f=this.y+d;a.preventDefault();this.pointX=
c.pageX;this.pointY=c.pageY;if(e>0||e<this.maxScrollX)e=this.options.bounce?this.x+b/2.4:e>=0||this.maxScrollX>=0?0:this.maxScrollX;if(f>0||f<this.maxScrollY)f=this.options.bounce?this.y+d/2.4:f>=0||this.maxScrollY>=0?0:this.maxScrollY;if(this.absDistX<4&&this.absDistY<4)this.distX+=b,this.distY+=d,this.absDistX=h.abs(this.distX),this.absDistY=h.abs(this.distY);else{if(this.options.lockDirection)if(this.absDistX>this.absDistY+3)f=this.y,d=0;else if(this.absDistY>this.absDistX+3)e=this.x,b=0;this.moved=
!0;this._pos(e,f);this.dirX=b>0?-1:b<0?1:0;this.dirY=d>0?-1:d<0?1:0;if(a.timeStamp-this.startTime>300)this.startTime=a.timeStamp,this.startX=this.x,this.startY=this.y}}},_end:function(a){if(!(g&&a.touches.length!=0)){var c=g?a.changedTouches[0]:a,b,d,e={dist:0,time:0},f={dist:0,time:0},q=a.timeStamp-this.startTime;b=this.x;d=this.y;this._unbind(l);this._unbind(m);this._unbind(n);if(this.moved){if(q<300&&this.options.momentum){e=b?this._momentum(b-this.startX,q,-this.x,this.scrollerW-this.wrapperW+
this.x,this.options.bounce?this.wrapperW:0):e;f=d?this._momentum(d-this.startY,q,-this.y,this.maxScrollY<0?this.scrollerH-this.wrapperH+this.y:0,this.options.bounce?this.wrapperH:0):f;b=this.x+e.dist;d=this.y+f.dist;if(this.x>0&&b>0||this.x<this.maxScrollX&&b<this.maxScrollX)e={dist:0,time:0};if(this.y>0&&d>0||this.y<this.maxScrollY&&d<this.maxScrollY)f={dist:0,time:0}}e.dist||f.dist?(a=h.max(h.max(e.time,f.time),10),this.scrollTo(b,d,a)):this._resetPos(200)}else{if(g){this.doubleTapTimer=null;for(b=
c.target;b.nodeType!=1;)b=b.parentNode;d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,a.view,1,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);d._fake=!0;b.dispatchEvent(d)}this._resetPos()}}},_resetPos:function(a){var c=this.x,b=this.y;if(this.x>=0)c=0;else if(this.x<this.maxScrollX)c=this.maxScrollX;if(this.y>=0||this.maxScrollY>0)b=0;else if(this.y<this.maxScrollY)b=this.maxScrollY;if(c==this.x&&b==this.y){if(this.moved)this.options.onScrollEnd&&
this.options.onScrollEnd.call(this),this.moved=!1;if(this.hScrollbar&&this.options.hideScrollbar)this.hScrollbarWrapper.style.webkitTransitionDelay="300ms",this.hScrollbarWrapper.style.opacity="0";if(this.vScrollbar&&this.options.hideScrollbar)this.vScrollbarWrapper.style.webkitTransitionDelay="300ms",this.vScrollbarWrapper.style.opacity="0"}else{if(a){this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)";if(this.hScrollbar)this.hScrollbarIndicator.style.webkitTransitionTimingFunction=
"cubic-bezier(0.33,0.0,0.33,1)";if(this.vScrollbar)this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"}this.scrollTo(c,b,a||0)}},_transitionEnd:function(a){a&&a.stopPropagation();this._unbind("webkitTransitionEnd");this._resetPos(this.returnTime);this.returnTime=0},_momentum:function(a,c,b,d,e){var c=h.abs(a)/c,f=c*c/0.0012,g=0,g=0;if(a>0&&f>b)g=e/(6/(f/c*6.0E-4)),b+=g,this.returnTime=800/e*g+100,c=c*b/f,f=b;else if(a<0&&f>d)g=e/(6/(f/c*6.0E-4)),d+=g,this.returnTime=
800/e*g+100,c=c*d/f,f=d;f*=a<0?-1:1;return{dist:f,time:h.round(c/6.0E-4)}},_offset:function(a,c){var b=-a.offsetLeft,d=-a.offsetTop;if(!c)return{x:b,y:d};for(;a=a.offsetParent;)b-=a.offsetLeft,d-=a.offsetTop;return{x:b,y:d}},_bind:function(a,c){(c||this.scroller).addEventListener(a,this,!1)},_unbind:function(a,c){(c||this.scroller).removeEventListener(a,this,!1)},destroy:function(){this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");this._scrollbar("v");this.scroller.style.webkitTransform="";
this._unbind("webkitTransitionEnd");this._unbind(o);this._unbind(p);this._unbind(l);this._unbind(m);this._unbind(n)},refresh:function(){this.wrapperW=this.wrapper.clientWidth;this.wrapperH=this.wrapper.clientHeight;this.scrollerW=this.scroller.offsetWidth;this.scrollerH=this.scroller.offsetHeight;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH;this.dirY=this.dirX=0;this._transitionTime(0);this.hScroll=this.options.hScroll&&this.maxScrollX<0;this.vScroll=this.options.vScroll&&
(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;this._scrollbar("h");this._scrollbar("v");this._resetPos()},scrollTo:function(a,c,b,d){var e=this;d&&(a=e.x-a,c=e.y-c);b=!b||h.round(e.x)==h.round(a)&&h.round(e.y)==h.round(c)?0:b;e.moved=!0;b&&e._bind("webkitTransitionEnd");e._transitionTime(b);e._pos(a,c);b||setTimeout(function(){e._transitionEnd()},
0)},scrollToElement:function(a,c){var b;if(a=a.nodeType?a:this.scroller.querySelector(a))b=this._offset(a),b.x=b.x>0?0:b.x<this.maxScrollX?this.maxScrollX:b.x,b.y=b.y>0?0:b.y<this.maxScrollY?this.maxScrollY:b.y,c=c===void 0?h.max(h.abs(b.x)*2,h.abs(b.y)*2):c,this.scrollTo(b.x,b.y,c)}};var i="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,g="ontouchstart"in window,s=/iphone|ipad/gi.test(navigator.appVersion),t=/android/gi.test(navigator.appVersion),o="onorientationchange"in window?"orientationchange":
"resize",p=g?"touchstart":"mousedown",l=g?"touchmove":"mousemove",m=g?"touchend":"mouseup",n=g?"touchcancel":"mouseup",j="translate"+(i?"3d(":"("),k=i?",0)":")",h=Math;SpilGames.append(SpilGames,{IScroll:r})})(SpilGames);


(function(){var a=window._gaq||[],c=Math.floor(Math.random(0,1)*1E5);_SG.Settings.get("environment")!="dev"?(c=_SG.Settings.get("jshash"),SpilGames.Head.load("/index/skel/js/api/spilgames.mobile-min.js?"+c,function(){SpilGames.Events.publish("interaction.loaded")})):SpilGames.Head.load("/index/skel/js/api/spilgames.mobile.js?"+c,function(){SpilGames.Events.publish("interaction.loaded")});SpilGames.Events.subscribe("auth.request",function(){console.log("auth request disabled.")});SpilGames.Events.subscribe("highscores.showscoreboard",
function(a){SpilGames.Highscores.getGameScores({onsuccess:function(d){SpilGames.UI.show({name:"Highscores",display:"iframe",model:{scores:d.scores},events:{".close":a.onclose||function(){}}})},onfailure:function(){SpilGames.Errors.report({error:"scoreboard.fail"})}})});(spilgames_api.channel_id==16||spilgames_api.channel_id==17||spilgames_api.channel_id==18)&&SpilGames.Events.subscribe("game.end",function(){_SG.Events.publish("rating.show")});if(spilgames_api.channel_id==16||spilgames_api.channel_id==
17||spilgames_api.channel_id==18)SpilGames.Events.subscribe("loading.end",function(){SpilGames.Debug.log("loading.end");SpilGames.Debug.report({message:"[EVENTS] [loading.end] "});a.push(["_trackEvent","gameEvent","loading.end","",null,!0])}),SpilGames.Events.subscribe("loading.start",function(){SpilGames.Debug.log("loading.start");SpilGames.Debug.report({message:"[EVENTS] [loading.start] "});a.push(["_trackEvent","gameEvent","loading.start","",null,!0])}),SpilGames.Events.subscribe("score.change",
function(b){SpilGames.Debug.log("score.change "+b);setTimeout(function(){SpilGames.Debug.report({message:"[EVENTS] [score.change] "+b});a.push(["_trackEvent","gameEvent","score.change",""+b,null,!0])},2E3)}),SpilGames.Events.subscribe("game.start",function(){SpilGames.Debug.log("game.start");SpilGames.Debug.report({message:"[EVENTS] [game.start] "});a.push(["_trackEvent","gameEvent","game.start","",null,!0]);SpilGames.Events.publish("activity",{name:"gameEvent",action:"game.start",label:""});window.navigator.standalone&&
(SpilGames.Debug.report({message:"[EVENTS] [homescreen.game.start] "}),a.push(["_trackEvent","gameEvent","homescreen.game.start","",null,!0]))}),SpilGames.Events.subscribe("game.restart",function(){SpilGames.Debug.log("game.restart");SpilGames.Debug.report({message:"[EVENTS] [game.restart] "});a.push(["_trackEvent","gameEvent","game.restart","",null,!0])}),SpilGames.Events.subscribe("game.end",function(){SpilGames.Debug.log("game.end");setTimeout(function(){SpilGames.Debug.report({message:"[EVENTS] [game.end] "});
a.push(["_trackEvent","gameEvent","game.end","",null,!0])},2E3)}),SpilGames.Events.subscribe("level.start",function(){SpilGames.Debug.log("level.start");SpilGames.Debug.report({message:"[EVENTS] [level.start] "});a.push(["_trackEvent","gameEvent","level.start","",null,!0])}),SpilGames.Events.subscribe("level.end",function(){SpilGames.Debug.log("level.end");SpilGames.Debug.report({message:"[EVENTS] [level.end] "});a.push(["_trackEvent","gameEvent","level.end","",null,!0])}),SpilGames.Events.subscribe("game.win",
function(){SpilGames.Debug.log("game.win");SpilGames.Debug.report({message:"[EVENTS] [game.win] "});a.push(["_trackEvent","gameEvent","game.win","",null,!0])}),SpilGames.Events.subscribe("game.lose",function(){SpilGames.Debug.log("game.lose");SpilGames.Debug.report({message:"[EVENTS] [game.lose] "});a.push(["_trackEvent","gameEvent","game.lose","",null,!0])}),SpilGames.Events.subscribe("manifest",function(b){a.push(["_trackEvent","gameEvent","manifest",""+b.type,null,!0])});(spilgames_api.channel_id==
16||spilgames_api.channel_id==17||spilgames_api.channel_id==18)&&SpilGames.Events.subscribe("interaction.loaded",function(){var b=!1,d=SpilGames.Cookies.get("appVisits")||!1;if(d){d=SpilGames.JSON.parse(d);for(appKey in d)b=d[appKey]||0,b++,d[appKey]=b,a.push(["_trackEvent","appReturningVisit",appKey,b,null,!0]),a.push(["_setCustomVar",3,"AppID",appKey,1]),SpilGames.Events.publish("activity",{name:"appReturningVisit",action:appKey,label:b}),b=!0;b&&SpilGames.Cookies.set("appVisits",SpilGames.JSON.stringify(d),
2592E3)}});(spilgames_api.channel_id==16||spilgames_api.channel_id==17||spilgames_api.channel_id==18)&&SpilGames.Events.subscribe("language.change",function(){var b=!1,d=new function(){this.cookieExpire=2592E3;this.updateVisit=function(a){a=a||"";if(a!=""){var b=SpilGames.JSON.parse(SpilGames.Cookies.get("appVisits"))||{},c=b[a]||0;c==0&&(b[a]=c,SpilGames.Cookies.set("appVisits",SpilGames.JSON.stringify(b),this.cookieExpire))}}},c=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+
a+"=([^&#]*)").exec(window.location.href);return a==null?"":a[1]}("appid");c!=""&&(b=!0);var f=0,e=window.localStorage.getItem("showLanguageBar");if(e){e=JSON.parse(e);if(typeof e.count!="undefined")f=e.count;if(f>1&&b==!1)return}_SG.Ajax({url:"http://"+window.location.host+"/lc/pb/1/country",dataType:"json",method:"get",data:{outputtype:"json"}},function(e){var i=spilgames_api.channel_id;if(e&&e.locatar){var e=e.locatar.country_code,j={GB:{url:{16:"games.co.uk",17:"agame.com",18:"girlsgogames.com"},
text:"Go to UK site?"},US:{url:{16:"gamesgames.com",17:"agame.com",18:"girlsgogames.com"},text:"Go to U.S. site?"},BR:{url:{16:"ojogos.com.br",17:"",18:"girlsgogames.com.br"},text:"Ir ao site Brasileiro?"},DE:{url:{16:"jetztspielen.de",17:"spielen.com",18:"girlsgogames.de"},text:"Deutsche Site nutzen?"},ES:{url:{16:"",17:"",18:"juegosdechicas.com"},text:"Ir a la p\u00e1gina de Espa\u00f1a"},FR:{url:{16:"jeux.fr",17:"jeu.fr",18:"girlsgogames.fr"},text:"Aller au site fran\u00e7ais?"},ID:{url:{16:"permainan.co.id",
17:"games.co.id",18:"girlsgogames.co.id"},text:"Ke situs Indonesia?"},IT:{url:{16:"gioco.it",17:"giochi.it",18:"girlsgogames.it"},text:"Vai al sito italiano?"},NL:{url:{16:"spelletjes.nl",17:"spel.nl",18:"girlsgogames.nl"},text:"Naar Nederlandse site?"},PL:{url:{16:"gry.pl",17:"",18:"girlsgogames.pl"},text:"Przejsc na strone PL?"},PT:{url:{16:"ojogos.pt",17:"",18:""},text:"Ir ao site\u00a0Portugu\u00eas?"},RU:{url:{16:"ourgames.ru",17:"flashgames.ru",18:"girlsgogames.ru"},text:"?? ?????????? ?????"},
SE:{url:{16:"spela.se",17:"spel.se",18:"girlsgogames.se"},text:"G\u00e5 till svenska sajten?"}},h;j[""+e]&&(h=j[""+e].url[i]);if(h){var i=!1,k=document.location.hostname;k.indexOf(h)==-1&&(i=!0);i?b==!0?(h="http://m."+h+"?ref=iosredirect",c!=""&&(h+="&appid="+c),window.location=h):(_SG.UI.show({name:"LanguageBar",target:"spilgames-root",display:"page",model:{url:"http://"+h+"?ref="+k,flagimage:"/skel/images/flag_"+e+".png",title:j[""+e].text},events:{".ready":function(){f+=1;window.localStorage.setItem("showLanguageBar",
'{"count":'+f+"}");var a=document.getElementById("header"),b=document.getElementById("content");document.querySelectorAll(".fixedHeader")[0]?(a.style.webkitAnimationDuration="1s",a.style.webkitAnimationName="slide-in-header",a.style.top="39px"):(a.style.webkitAnimationDuration="1s",a.style.webkitAnimationName="slide-in",b.style.webkitAnimationDuration="1s",b.style.webkitAnimationName="slide-in")},".closeanim":function(){var a=document.getElementById("language-bar"),b=document.getElementById("header"),
c=document.getElementById("content");a.style.webkitAnimationDuration="1s";a.style.webkitAnimationName="slide-out";document.querySelectorAll(".fixedHeader")[0]?(b.style.webkitAnimationDuration="1s",b.style.webkitAnimationName="slide-out-header",b.style.top="0px"):(b.style.webkitAnimationDuration="1s",b.style.webkitAnimationName="slide-out",c.style.webkitAnimationDuration="1s",c.style.webkitAnimationName="slide-out");window.localStorage.setItem("showLanguageBar","false")}}}),a.push(["_trackEvent","portalEvent",
"geo.bar.show","",null,!0])):d.updateVisit(c)}}})})})();
if(spilgames_api.channel_id==16||spilgames_api.channel_id==17||spilgames_api.channel_id==18){var ratingCount=0,ratingAverage=0;SpilGames.Events.subscribe("rating.add",function(a){if(typeof a=="undefined")console.log("rating.add: params undefined");else{var c=a.gameid||0,b=a.rating||-1,d=a.prevTime||0,g=a.prevRating||0,f=a.prevCount||0;_SG.Ajax({url:"http://"+window.location.host+"/rt/pb/2/add/"+(spilgames_api.channel_id-15)+"/"+spilgames_api.site_id+"/6/"+c,dataType:"json",method:"post",data:{outputtype:"json",
username:"",hash:"",rating:b,itemname:"",comment:""}},function(e){typeof e.rator.ratorid!="undefined"&&(typeof a.game!="undefined"?_SG.UI.show({name:"Alert",display:"iframe",model:{title:SpilGames._("Done!"),message:SpilGames._("Thanks for your rating!"),buttons:[{id:"alert-close",text:SpilGames._("Close")}]},events:{".ready":function(){}}}):_SG.UI.show({name:"Alert",display:"popup",target:"spilgames-root",model:{title:SpilGames._("Done!"),message:SpilGames._("Thanks for your rating!"),
buttons:[{id:"alert-close",text:SpilGames._("Close")}]},events:{".ready":function(){}}}),e=SpilGames.Cache.get("rating")||{},e[""+c]={r:b,ct:d,cr:g,cc:f},SpilGames.Cache.set("rating",e,31104E3,!0),ratingCount=Number(e[""+c].cc)+1,ratingAverage=Math.round((e[""+c].cr*(ratingCount-1)+e[""+c].r/2)/ratingCount),typeof a.game=="undefined"&&_SG.UI.show({name:"Rating",display:"page",target:"rating-module",model:{count:5,filled:ratingAverage,ratings:ratingCount},events:{".ready":function(){document.getElementById("like-action").style.display=
"none";document.getElementById("dislike-action").style.display="none";document.getElementById("rating-hearts").style.display="block"}}}))})}});SpilGames.Events.subscribe("rating.current",function(){var a=_SG.Settings.get("currentGameInfo");if(typeof a=="undefined")console.log("rating.current: game object undefined");else{var c=Math.round(a.rating)/2||0,b=a.rating_cnt||0,d=a.id,g=a.rator_last_update||0,f=!0,a=SpilGames.Cache.get("rating")||{};typeof a[""+d]!="undefined"&&(f=!1);!f&&g<=a[""+d].ct&&
(b=Number(a[""+d].cc)+1,c=Math.round((a[""+d].cr*(b-1)+a[""+d].r/2)/b));_SG.UI.show({name:"Rating",display:"page",target:"rating-module",model:{count:5,filled:c,ratings:b},events:{".ready":function(){if(!f)document.getElementById("like-action").style.display="none",document.getElementById("dislike-action").style.display="none",document.getElementById("rating-hearts").style.display="block"},".like":function(){if(f)document.getElementById("like-action").className="like loading",SpilGames.Events.publish("rating.add",
{gameid:d,rating:10,prevTime:g,prevRating:c,prevCount:b})},".dislike":function(){if(f)document.getElementById("dislike-action").className="dislike loading",SpilGames.Events.publish("rating.add",{gameid:d,rating:1,prevTime:g,prevRating:c,prevCount:b})}}})}});SpilGames.Events.subscribe("rating.show",function(){var a=_SG.Settings.get("currentGameInfo");if(typeof a=="undefined")console.log("rating.show: game object undefined");else{var c=a.rating||0,b=Math.round((a.rating_cnt||0)/2),d=a.game_id||-1,g=
a.rator_last_update||0;typeof d==-1?console.log("rating.show: game id not found"):typeof(SpilGames.Cache.get("rating")||{})[""+d]=="undefined"&&_SG.UI.show({name:"Rating",display:"iframe",target:"rating-module",model:{count:5,filled:c,ratings:b,title:SpilGames._("Do you like this game?"),buttons:[{id:"like-action",text:SpilGames._("I like it!")},{id:"dislike-action",text:SpilGames._("I don't like it..")}]},events:{".ready":function(){},".like":function(){SpilGames.Events.publish("rating.add",{gameid:d,rating:10,
prevTime:g,prevRating:c,prevCount:b,game:!0})},".dislike":function(){SpilGames.Events.publish("rating.add",{gameid:d,rating:1,prevTime:g,prevRating:c,prevCount:b,game:!0})},".close":function(){}}})}});SpilGames.Events.subscribe("notification",function(){var a=document.getElementById("notification-module");if(navigator.userAgent.toLowerCase().match(/android/))if(window.location.href.indexOf("?bookmark")!=-1){if(a)a.style.display="none";_SG.Cookies.set("SpilGames.UI.Bookmark.shown",!0);_gaq.push(["_trackEvent",
"portalEvent","bookmark.shownAlready","",null,!0])}else if(!_SG.Cookies.get("SpilGames.UI.Bookmark.shown")){if(a)a.style.display="block";SpilGames.UI.show({name:"Notification",display:"page",target:"notification-module",model:{bookmarkImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAlCAYAAAC+uuLPAAAFV0lEQVR42rWWW0yTZxyHO6ebGpdlumVeLGYmZjfGkU1vdrFs0V0sWxZ1zomHoQKKCKKychAFkYkoTJQ5SfCAKKhBJmcKH+e2HMqhiihSORT42kqhlAqK4mm//d+mdql9Kc6sF0/Sr+/7f57ve/uRIAFgJe7DoKWnF+5GmkeoW2DuKIn3XGL6i+ACwiwsOwrVitNugdws+i0Ls+C7RCthXezcnO0WyM2im4iP7cdLFxLVyjPo8s5xC+TmRxt+PItun1y3wNz86CqK+ua6BXLzo40/pUK7NW9SunxzYIiVo/dXGWedD7n50abV59Djlz8pGp+reKwyQIyXsxt4pRly86PNa9LQ61/gEq0f3XlMKaCxwFLYDo131qQzDHLzo+q159EXUOiSji3ZGMq+aY3+3T6MDilJtxdMOkdufvTaugsQA4smhA13hhTiacsgi1rpP9+Mbr9ctu4ScvOj19enQxdUPCFa/3wYTqlYzM7Deh06d+WzdZeQmx9t+SUD+l0l0O0sxt3oKhjja2BMqsPQWTUsmbcwKuvAs1YTizmGFX24l30b5gstGExugDGB5g4rmYf5rJCbH231uoi7wQLEoCLoExRM+NqMFNxBb2AB81lhbn500yX0S0sh7ixCi1cG1MGZGG80/Odg37l6qNalQhuQx3xWyM2P3vS+DGNoGe5KBXRtz0HtqhRUeqVgVK595WBbooDS7xLBXPrgYuZjsGt+9JZPJgbCK6z000btjnw0eKaifE0yzCUal7GnNwZx/UAeyr9Pwu0tV2CQCsxjh9z8aBttHoyotDOwpwLibhma1qfhZmyRy+iovAfKtadwx/8q+sPKHDwMcvOj7VuvYGhvlQMmGugOzMNg1g2XUfZWd+4rohMqdXIwyM2ParZlwRxZ7UQP/R0+Uukn/T3FY3IYw8u4DnLzo+xohvcrHDBHydEbKeB5m/lfeUYDhLUnoY7KwVidaP/emK6GIVRwcjDIzY92BGTDckDpgGlfFfR/1lilQ7J21Aam09t5DPWeZ6BYmYwKz2TcOVEJtFswpuiDGFYCS7TSyUNufrRzRw7u/VbjgDGiHIaUemjiBZT+kITmDWnQ0nH3R5RBF1KMtq2ZqF5xEkqfVJiutkLcK8ASo3TykJsf7Q7KxWhsrQODkRXQ+GehZVM6umhwYF85SZTWtZGDNTBHV0OUytDqc4ntoRuRYYQiL3vIzY9qd+XhflydA/cO0hHvr4QpqtL6+f4hx3UGk7I4u8HhA3LuHubmR3cX4MERlVsgNz/aE1yIsfgGt0BufrRXWoiHvzdOylhCA8SQkh5dqKClz680Q25+tC+0CI8SmybmaBNGD9c9kS8/LaP9AYRn3c9pqSNxteO05nKW3PyoGCbD+LFmLmxQFyboT82PiKe9G4kvifmMjEUxq/Xhpe0UnnCe3PyoLrwYj5PUTtARPqMnKot+0zeI9i0nFhGziak23iMWqr0unn2QoHry+Lizg7n50T0U/UNth20eiK4ypX4SmWgb+IqYR8wg3jj/aYjkgkeohH0mphMfZS4+tN4YVdE9ntTs4CI3P6qPKMGTE9esjB9vxrWNl2tiZ2yT0toqwoOYQ0xloZfJ+GyPxPbUsw++7edxwycz4+HRxmcvfOTmRw17BTw9cR3mWMXwlSVxKfSdL7HM9tvNJKake4RJXGF76hnEvOwv4jebYqp1LEruiY+X/p1UHJ61PYyuVxOLiQ+IaUzGiXC5+Ln9qecceSdgSdu2v7LEcNlzut7gFCXmEkuJb4gFxCxiClt7TdjsTBayvQ9fs8bL0em2J5tDvGU7Ksn/wDTbG/4+a/wDGUwZFB+ClLMAAAAASUVORK5CYII="},
events:{".ready":function(){_SG.Cookies.set("SpilGames.UI.Bookmark.shown",!0)},".close":function(){SpilGames.Events.publish("bookmark")}}})}});SpilGames.Events.subscribe("bookmark",function(){SpilGames.UI.show({name:"Bookmark",display:"popup",events:{".close":function(){SpilGames.Debug.report({message:"[EVENTS] [bookmark.closed]"});history.replaceState?window.history.replaceState("","Added to Bookmark","?bookmark"):location.href+="?bookmark"}}})})}
SpilGames.Events.subscribe("activity",function(a){if(window.SpilUserTracking&&a.name&&a.action){var c=a.name,b=a.action,a=a.label;if(typeof c=="object"||typeof c=="array")c=JSON.stringify(c);if(typeof b=="object"||typeof b=="array")b=JSON.stringify(b);if(typeof a=="object"||typeof a=="array")a=JSON.stringify(a);window.SpilUserTracking.addActivity({name:c,action:b,label:a})}});


SpilGames.MenuScroller=function(){var a=this,m=/iphone|ipod/i,j=/android|iphone|ipod/i,f=document.getElementById("menu");if(f){var c=f.querySelector(".navigation"),b,e,g,i,h=0,k=0,l=!0;this.getFeatures=function(){localStorage.getItem("features")&&(e=localStorage.getItem("features"))&&(e=JSON.parse(e));return e};this.rightArrow=function(){b=document.createElement("li");b.id="rightNav";b.innerHTML='<a href="javascript:void(0)">'+_SG._("More")+"</a>";c.appendChild(b)};this.setNavStyle=function(){var d=
document.getElementById("menu-my"),a=document.getElementById("menu-games-best_rated");if(b)d.style.display="block",a.style.display="block",b.style.display="inline-block";f.style.webkitOverflowScrolling="touch";f.style.overflowX="scroll"};this.firstSetup=function(){a.rightArrow();a.setNavStyle();g=c.getElementsByTagName("li");i=g.length;if(i<2)return null;b&&(c.insertBefore(b,g[2]),a.hideMenu(g,i));c.style.visibility="visible"};this.iosSetup=function(){b.addEventListener("touchstart",function(){l&&
(l=!1,b.setAttribute("class","translateOut"),setTimeout(function(){a.showMenu(g,i)},600))},!1);c.addEventListener("touchmove",function(){a.removeEffect(c)},!1)};this.androidSetup=function(){var d=b.getElementsByTagName("a")[0];b.onclick=function(){b.setAttribute("class","translateOut");setTimeout(function(){a.showMenu(g,i);d.style.display="none";b.style.display="none";a.slide(c)},400)}};this.slide=function(d){var b={};a.getLisOffsetW(g,i);d.style.position="absolute";f.addEventListener("touchstart",
function(d){b={pageX:d.touches[0].pageX+h}},!1);c.addEventListener("touchmove",function(d){d.preventDefault();a.onTouchMove(d,c,b,k)},!1)};this.onTouchMove=function(d,b,a,c){if(!(d.touches.length>1||d.scale&&d.scale!==1)){var a=a.pageX-d.touches[0].pageX,e=f.width=f.getBoundingClientRect().width;h=a;h<0?h=0:h>=c-e&&(d.preventDefault(),h=c-e+25);b.style.left=-h+"px"}};this.showMenu=function(d,a){for(var b=0;b<a;b++)d[b].style.display="inline-block";e.device.os.match(m)&&e.device.osVersion>="5"&&(l||
setTimeout(function(){c.setAttribute("class","translateIn")},300))};this.hideMenu=function(d,b){for(var a=0,c=0;c<b-1;c++)if(a++,a>2)d[a].style.display="none"};this.removeEffect=function(a){if(a.className=="translateIn")a.removeAttribute("class","translateIn"),c.scrollLeft=100};this.getLisOffsetW=function(a,b){for(var c=0;c<b;c++)k+=a[c].offsetWidth;return k};if(e=a.getFeatures()){var j=e.device.os.match(j),o=e.device.osVersion>"2.1"&&e.device.osVersion<"5",n=e.viewport.width<=600;e.device.os.match(m)&&
e.device.osVersion>="5"&&n?(a.firstSetup(),a.iosSetup()):j&&o&&n?(a.firstSetup(),a.androidSetup()):c.style.visibility="visible"}else c.style.visibility="visible"}};SpilGames.MenuScroller();


SpilGames.Head.ready(function(){setTimeout(function(){window.scrollTo(0,-1)},10);SpilGames.Auth.getAuthState()=="NOT_AUTHENTICATED"?document.getElementById("content")!==null&&document.getElementById("content")!==void 0&&showLoginBox():SpilGames.Users.getCurrentUser({onsuccess:function(a){username=a.uid;a=a.pic_square;document.getElementById("content")!==null&&document.getElementById("content")!==void 0&&(a=a||"/img/avatar.png",showLogoutBox(username),setAvatar(a))},onfailure:function(){}})});
window.goToWithHash=function(){};function setAvatar(a){var b=document.getElementById("avatarImg");if(a!==void 0||a!==null)b.style.backgroundImage="url("+a+")"}
function showLoginBox(){var a=document.getElementById("header-title-bar"),b=document.createElement("div");b.setAttribute("class","loginbox");var c=document.createElement("a");c.setAttribute("href","#");c.setAttribute("onclick","SpilGames.Auth.authenticate();");c.innerHTML=SpilGames._("Sign In");b.appendChild(c);a.insertBefore(b,a.firstChild)}
function showLogoutBox(a){var b=document.getElementById("content");logoutDiv=document.createElement("div");logoutDiv.setAttribute("id","logoutBox");logoutDiv.setAttribute("class","logoutbox");var c=document.createElement("div");c.setAttribute("id","avatarImg");logoutText=document.createElement("p");helloText=document.createElement("strong");helloText.innerHTML=SpilGames._("Hi %s!",a);signOut=document.createElement("span");signOut.innerHTML=" | ";logoutLink=document.createElement("a");logoutLink.setAttribute("href",
"#");logoutLink.setAttribute("onclick","logout();");logoutLink.innerHTML=SpilGames._("Sign Out");logoutText.appendChild(helloText);signOut.appendChild(logoutLink);logoutText.appendChild(signOut);logoutDiv.appendChild(c);logoutDiv.appendChild(logoutText);b.appendChild(logoutDiv)}window.logout=function(){SpilGames.Events.publish("auth.logout");window.top.location="/"};


SpilGames.Bookmark=function(c){function n(){var b=SpilGames.Helpers.getCacheKey("count-addToHome");b&&localStorage.setItem("count-addToHome",b);t=JSON.parse(b);b=t;b<2?(b++,c.localStorage.setItem("count-addToHome",b),b=!0):b=!1;if(b&&(c.removeEventListener("load",n,!1),o?d.expire&&q&&c.localStorage.setItem("spilgames-addToHome",Date.now()+d.expire*6E4):c.localStorage.setItem("spilgames-addToHome",Date.now()),u||v&&q&&!r&&!w&&o)){var b=d.touchIcon?document.querySelectorAll("head link[rel=apple-touch-icon],head link[rel=apple-touch-icon-precomposed]"):
[],l,h="",g=e.platform.split(" ")[0];e.language.replace("-","_");var f,k;a=document.createElement("div");a.id="spilgames-addToHomeScreen";a.style.cssText+="left:-9999px;-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);position:"+(i<5?"absolute":"fixed");if(b.length){for(f=0,k=b.length;f<k;f++)if(l=b[f].getAttribute("sizes")){if(x&&l=="114x114"){h=b[f].href;break}}else h=b[f].href;h='<span style="background-image:url('+h+')" class="addToHomeTouchIcon"></span>'}a.className=
(j?"addToHomeIpad":"addToHomeIphone")+(h?" addToHomeWide":"");a.innerHTML=h+d.message.replace("%device",g).replace("%icon",i>=4.2?'<span class="addToHomeShare"></span>':'<span class="addToHomePlus">+</span>')+(d.arrow?'<span class="addToHomeArrow"></span>':"")+'<span class="addToHomeClose">\u00d7</span>';document.body.appendChild(a);(b=a.querySelector(".addToHomeClose"))&&b.addEventListener("click",A,!1);setTimeout(B,d.startDelay)}}function B(){var b;b=160;if(j){if(i<5)g=c.scrollY,f=c.scrollX,b=208;
a.style.top=g+d.bottomOffset+"px";a.style.left=f+b-Math.round(a.offsetWidth/2)+"px";switch(d.animationIn){case "drop":b="0.6s";a.style.webkitTransform="translate3d(0,"+-(c.scrollY+d.bottomOffset+a.offsetHeight)+"px,0)";break;case "bubble":b="0.6s";a.style.opacity="0";a.style.webkitTransform="translate3d(0,"+(g+50)+"px,0)";break;default:b="1s",a.style.opacity="0"}}else switch(g=c.innerHeight+c.scrollY,i<5?(f=Math.round((c.innerWidth-a.offsetWidth)/2)+c.scrollX,a.style.left=f+"px",a.style.top=g-a.offsetHeight-
d.bottomOffset+"px"):(a.style.left="50%",a.style.marginLeft=-Math.round(a.offsetWidth/2)+"px",a.style.bottom=d.bottomOffset+"px"),d.animationIn){case "drop":b="1s";a.style.webkitTransform="translate3d(0,"+-(g+d.bottomOffset)+"px,0)";break;case "bubble":b="0.6s";a.style.webkitTransform="translate3d(0,"+(a.offsetHeight+d.bottomOffset+50)+"px,0)";break;default:b="1s",a.style.opacity="0"}a.style.webkitTransitionDuration=b;a.style.opacity="1";a.style.webkitTransform="translate3d(0,0,0)";a.addEventListener("webkitTransitionEnd",
s,!1);m=setTimeout(p,d.lifespan)}function p(){clearInterval(y);clearTimeout(m);m=null;var b=0,l=0,h="1",e="0";(e=a.querySelector(".addToHomeClose"))&&e.removeEventListener("click",p,!1);i<5&&(b=j?c.scrollY-g:c.scrollY+c.innerHeight-g,l=j?c.scrollX-f:c.scrollX+Math.round((c.innerWidth-a.offsetWidth)/2)-f);a.style.webkitTransitionProperty="-webkit-transform,opacity";switch(d.animationOut){case "drop":j?(e="0.4s",h="0",b+=50):(e="0.6s",b=b+a.offsetHeight+d.bottomOffset+50);break;case "bubble":j?(e="0.8s",
b=b-a.offsetHeight-d.bottomOffset-50):(e="0.4s",h="0",b-=50);break;default:e="0.8s",h="0"}a.addEventListener("webkitTransitionEnd",s,!1);a.style.opacity=h;a.style.webkitTransitionDuration=e;a.style.webkitTransform="translate3d("+l+"px,"+b+"px,0)"}function A(){c.sessionStorage.setItem("spilgames-addToHomeSession","1");r=!0;p()}function s(){a.removeEventListener("webkitTransitionEnd",s,!1);a.style.webkitTransitionProperty="-webkit-transform";a.style.webkitTransitionDuration="0.2s";m?i<5&&m&&(y=setInterval(C,
d.iterations)):(a.parentNode.removeChild(a),a=null)}function C(){var b=new WebKitCSSMatrix(c.getComputedStyle(a,null).webkitTransform),d=j?c.scrollY-g:c.scrollY+c.innerHeight-g,e=j?c.scrollX-f:c.scrollX+Math.round((c.innerWidth-a.offsetWidth)/2)-f;if(!(d==b.m42&&e==b.m41))a.style.webkitTransform="translate3d("+e+"px,"+d+"px,0)"}var e=c.navigator,z="platform"in e&&/iphone|ipod|ipad/gi.test(e.platform),j,x,v,w,i,f=0,g=0,k=0,q,r,o,a,u,t=0,y,m,d={autostart:!1,returningVisitor:!1,animationIn:"drop",animationOut:"fade",
startDelay:2E3,lifespan:15E3,bottomOffset:14,expire:0,message:SpilGames._("Install this web app on your %device: tap %icon and then <strong>Add to Home Screen</strong>."),touchIcon:!1,arrow:!0,hookOnLoad:!0,iterations:100},D=e.userAgent.toLowerCase().match(/crios/i);(function(){if(z&&!D){var a=Date.now(),f;if(c.addToHomeConfig)for(f in c.addToHomeConfig)d[f]=c.addToHomeConfig[f];if(!d.autostart)d.hookOnLoad=!1;j=/ipad/gi.test(e.platform);x=c.devicePixelRatio&&c.devicePixelRatio>1;v=e.appVersion.match(/Safari/gi);
w=e.standalone;i=e.appVersion.match(/OS (\d+_\d+)/i);i=i[1]?+i[1].replace("_","."):0;k=+c.localStorage.getItem("spilgames-addToHome");r=c.sessionStorage.getItem("spilgames-addToHomeSession");o=d.returningVisitor?k&&k+24192E5>a:!0;k||(k=a);q=o&&k<=a;d.hookOnLoad?c.addEventListener("load",n,!1):!d.hookOnLoad&&d.autostart&&n()}})();return{show:function(b){z&&!a&&(u=b,n())},close:p,reset:function(){c.localStorage.removeItem("spilgames-addToHome");c.sessionStorage.removeItem("spilgames-addToHomeSession");
c.localStorage.removeItem("count-addToHome")}}}(this);


SpilGames._Gameplay=new GP;
function GP(){this.insert=function(e){if(e.gameInfo){var c=window.localStorage.getItem("PlayedGames")||"[]",c=JSON.parse(c);typeof c=="string"&&(c=JSON.parse(c));for(var a=[],b=0;b<c.length;b++)c[b].game_name!=e.gameInfo.title&&a.push(c[b]);if(e.gameInfo.thumbs){a.push({game_link:e.gameInfo.jumpurl,game_name:e.gameInfo.title,game_thumb:e.gameInfo.thumbs.mobile_list||""});a=a.reverse();a=a.slice(0,10);try{window.localStorage.setItem("PlayedGames",JSON.stringify(a))}catch(d){SpilGames.Debug.log(d)}}}};this.createList=
function(e,c){function a(d){b.target.innerHTML="";if(d.code==200){for(var a="",d=d.data.scores||d.data.listplayed,c=0;c<d.length;c++)a=b.listHTML,a=a.replace(":nicename:",d[c].game.nicename),a=a.replace(":game_link:",d[c].game.link),a=a.replace(":game_name:",d[c].game.name),a=a.replace(":name:",d[c].game.name),a=a.replace(":game_thumb:",d[c].game.thumb),a=a.replace(":user_name:",d[c].user.name),a=a.replace(":score:",d[c].score),b.target.appendChild(_SG.createElement(a));b.target.innerHTML==""&&b.target.appendChild(_SG.createElement(b.errorHTML))}else b.target.appendChild(_SG.createElement(b.errorHTML))}
var b={},b=_SG.append({userIds:null,callback:function(){},target:null,loadingHTML:"<li>Loading...</li>",listHTML:"<li>:game_link: :pic_square: :game_name:</li>",errorHTML:'<li class="error">:error_message:</li>',emptyHTML:"<li>Empty</li>",type:"myPlays"},e,c);if(typeof b.target=="string")b.target=document.getElementById(b.target);else if(b.target===null)b.target=document.createElement("<ul>");b.target.innerHTML=b.loadingHTML;switch(b.type){case "myScores":SpilGames.Highscores.getMyScores({onsuccess:function(b){a({code:200,
data:b})},onfailure:function(){a({code:500,data:"failed"})}});break;case "myPlays":SpilGames.Gameplay.getMyPlays({onsuccess:function(b){a({code:200,data:b})},onfailure:function(){a({code:500,data:"failed"})}});break;case "friendScores":SpilGames.Highscores.getFriendScores({onsuccess:function(b){a({code:200,data:b})},onfailure:function(){a({code:500,data:"failed"})}});break;case "friendPlays":SpilGames.Gameplay.getFriendPlays({onsuccess:function(b){a({code:200,data:b})},onfailure:function(){a({code:500,
data:"failed"})}});break;default:a({code:500,data:"failed"})}}};


(function(){window.highscoreCss="div#highscore-popup{font-family:Helvetica,Verdana,Arial,sans-serif;-webkit-box-shadow:0 0 10px #CCC;box-shadow:0 0 10px #CCC;position:absolute;margin:0 auto;top:0;z-index:1000;background-color:#FFF;border:1px solid #fffbde;border-radius:10px}div#highscore-popup>h2{height:48px;line-height:48px;margin:0;font-size:24px;color:#FFF;text-align:center;border-top-left-radius:10px;border-top-right-radius:10px;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#f40b0f),color-stop(1,#c81a24));border-bottom:1px solid #FFF}div#highscore-popup>p.error{padding:7px 5px;color:#A00;border:1px solid #EAA;background-color:#FEE}div#highscore-popup>div{margin:0;padding:0;overflow:hidden;float:left;width:100%}div#highscore-popup>div>ul{margin:0;padding:0;position:relative;top:0}div#highscore-popup>div>ul>li{background-image:none!important;background-color:#FFF;font-weight:bold;font-size:25px;list-style-type:none;clear:both;height:65px;overflow:hidden;border-bottom:1px solid #FFF!important}div#highscore-popup>div>ul>li:nth-child(odd){background-color:#fbfbfb}div#highscore-popup>div>ul>li:last-child{border-bottom:none}div#highscore-popup>div>ul>li>*{float:left;margin-top:5px}div#hsScroll{background-image:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fff),color-stop(1,#f6e7eb));background-image:-moz-linear-gradient(center top,#fff 0,#f68c8c 100%)}div#highscore-popup>a.close-popup{position:absolute;bottom:0;display:block;height:48px;line-height:48px;border-top:1px solid #ffe7e7;text-align:center;color:#333;font-weight:bold;font-size:24px;width:100%}div#highscore-popup>div>ul>li>img{width:55px;height:55px}div#highscore-popup>div>ul>li>span{display:block;line-height:55px;padding:0 5px 0 8px}div#highscore-popup>div>ul>li>div{line-height:30px;font-weight:normal;font-size:15px;height:55px;overflow:hidden;margin-left:8px}div#highscore-popup>div>ul>li strong{height:27px;overflow:hidden;display:block}div#highscore-popup div#hsScroll{float:right;position:relative;border-left:1px solid #ffe7e7;border-bottom:1px solid #ffe7e7}div#highscore-popup div#hsScroll>div{width:100%;height:50%;text-align:center}#highscoreScrollUp,#highscoreScrollDown{position:absolute;left:0;top:0}#highscoreScrollDown{top:50%}div#hsScroll>div>img{width:80%;height:20%}#highscoreScrollDownInactive>img,#highscoreScrollDown>img{position:absolute;bottom:0;margin-left:10%}div#hsScroll>div#highscoreScrollDownInactive>img{height:10%}.scorebeaten{-webkit-animation-name:'pulsate';-webkit-animation-duration:2s;-webkit-animation-iteration-count:5;background-image:none!important;background-color:#fffbbc}@-webkit-keyframes 'pulsate'{0%{background-color:#FFF}50%{background-color:#fffbbc}100%{background-color:#FFF}}#scrollerWrapper{position:relative}"})();


_SG.Highscores.leaderBoard=function(){};


SpilGames._Highscores=new HS;_SG.Settings.setDefault("facebook",{app_id:"<facebook_app_id>",url:"<facebook_url>",share:"<facebook_share>"});
function HS(){this._trackEvent=function(){try{_gaq.push(["_trackEvent","Share score","facebook",window.location.pathname,null,!0])}catch(d){}};this.game=function(d){var i;var a=document.getElementById(d.targetId),e="",g=[],b=d.data;if(b){if(i=g=b.scores,b=i){for(var f=0;f<b.length;f++){var c=d.listHTML,c=c.replace(":uid:",b[f].user.uid),c=c.replace(":name:",b[f].user.name||b[f].user.uid),c=c.replace(":score:",b[f].score),c=c.replace(":place:",b[f].position),c=c.replace(":avatar:",b[f].user.avatar||
b[f].user.pic_square||d.defaultAvatar),c=c.replace(":profile_url:",""),c=c.replace(":share:","");e+=c}if(b.length===0)e=d.noScoreHTML}}else e=d.errorHTML;if(d.display=="page"){if(g.length!=0&&(g=d.titleHtml||"",a))a.innerHTML=g+d.listContainer,a.innerHTML=a.innerHTML.replace(":highscores:",e)}else g=d.titleHtml||"",b=window.navigator.userAgent,b=b.indexOf("iPhone")!=-1||b.indexOf("iPod")!=-1,f=0,c=window!=window.top,b&&!c&&(f=37),a=document.createElement("div"),a.setAttribute("id","highscore-popup"),
a.innerHTML=a.innerHTML+g+d.popupHTML,a.style.zIndex="2000",a.style.width=Math.round(window.innerWidth*0.9)+"px",a.style.height=Math.round(window.innerHeight*0.9)+"px",a.style.top="50%",a.style.left="50%",a.style.marginLeft="-"+Math.round(Math.round(window.innerWidth*0.9)/2)+"px",a.style.marginTop="-"+(Math.round(Math.round(window.innerHeight*0.9)/2)-f)+"px",a.innerHTML=a.innerHTML.replace(":highscores:",e),document.getElementsByTagName("body")[0].appendChild(a),e=document.createElement("a"),e.setAttribute("class",
"close-popup"),e.setAttribute("href","javascript:void(0)"),e.innerHTML=d.closeButtonText,e.addEventListener("click",function(){h()},!1),e.addEventListener("touchend",function(){h()},!1),a.appendChild(e),d.onReady();var h=function(){a.parentNode&&a.parentNode.removeChild(a);d.closeCallback()}}};

