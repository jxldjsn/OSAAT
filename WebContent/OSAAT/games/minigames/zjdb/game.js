var s_bg="hd/beijing.png",s_xuetiaoditu="hd/xuetiaoditu.png",s_xuetiao="hd/xuetiao.png",s_touming_luxian="hd/touming_luxian.png",s_zhunxing="hd/zhunxing.png",s_more="hd/more.png",s_gameUi_png="hd/gameUi.png",s_gameUi_plist="hd/gameUi.plist",s_gameDonghua_png="hd/gameDonghua.png",s_gameDonghua_plist="hd/gameDonghua.plist",s_gameDonghua_hushi_png="hd/gameDonghuaHushi.png",s_gameDonghua_hushi_plist="hd/gameDonghuaHushi.plist",s_duizhang_down="spXml/duizhang_down.xml",s_duizhang_up="spXml/duizhang_up.xml",
s_jiangshi1="spXml/jiangshi1.xml",s_jiangshi2="spXml/jiangshi2.xml",s_jiangshi3="spXml/jiangshi3.xml",s_jiangshi4="spXml/jiangshi4.xml",s_jiangshi5="spXml/jiangshi5.xml",s_backGround="res/audio/background.mp3",s_kaiqiang1="res/audio/qiang1.mp3",s_kaiqiang2="res/audio/qiang2.mp3",s_kaiqiang3="res/audio/qiang3.mp3",s_kaiqiang4="res/audio/qiang4.mp3",s_kaiqiang5="res/audio/qiang5.mp3",s_anniu="res/audio/anniu.mp3",s_zhujueDead="res/audio/zhujueDead.mp3",s_jiangshiDead="res/audio/jiangshiDead.mp3",s_json_welcome=
"Welcome.json",s_json_main="MainScene.json",s_json_playGame="PlayGameScene.json",s_json_gameOver="GameOverScene.json",g_resources=[{src:s_bg},{src:s_xuetiaoditu},{src:s_xuetiao},{src:s_touming_luxian},{src:s_zhunxing},{src:s_more},{type:"png",src:s_gameUi_png},{type:"png",src:s_gameDonghua_png},{type:"png",src:s_gameDonghua_hushi_png},{type:"plist",src:s_gameUi_plist},{type:"plist",src:s_gameDonghua_plist},{type:"plist",src:s_gameDonghua_hushi_plist},{type:"json",src:s_json_welcome},{type:"json",
src:s_json_main},{type:"json",src:s_json_playGame},{type:"json",src:s_json_gameOver},{type:"mp3",src:s_backGround},{type:"mp3",src:s_kaiqiang1},{type:"mp3",src:s_kaiqiang2},{type:"mp3",src:s_kaiqiang3},{type:"mp3",src:s_kaiqiang4},{type:"mp3",src:s_kaiqiang5},{type:"mp3",src:s_anniu},{type:"mp3",src:s_zhujueDead},{type:"mp3",src:s_jiangshiDead},{type:"xml",src:s_duizhang_down},{type:"xml",src:s_jiangshi1},{type:"xml",src:s_jiangshi2},{type:"xml",src:s_jiangshi3},{type:"xml",src:s_jiangshi4},{type:"xml",
src:s_jiangshi5},{type:"xml",src:s_duizhang_up}],ccb_resources=[];var CustomData=function(){this.hpSprite=this.hpDituSprite=this.zongHp=this.hp=null;this.isPass=this.isDead=!1;this.tagY=this.isFly=this.money=this.sudu=this.waitTime=this.dengji=this.gongji=this.fenshu=this.yidongTime=null;this.isYijingGongji=!1;this.mingzhongGuaiArray=[]};CustomData.create=function(){var a=new CustomData;return a?a:null};var qyp_isgame_pause=!1,qyp_createX=520,qyp_createYMax=250,qyp_zhunxingPianyiY=15,qyp_createYMin=50,isGame_Pause=!1,qyp_gongjiWaitTime=0.1,isYinyueKaiqji=!0,isYinxiaoKaiqji=!0,qyp_exec_remove_waitTime=2,qyp_gongji=15,qyp_guai_gongji_waitTime=2,qyp_imagePath="hd/",qyp_guai_gameover_waitTime=1,qyp_guai_startgame_waitTime=2,qyp_resize_waitTime=0.5,qyp_view_width=0,qyp_view_height=0,qyp_guai_gongji_donghuaTime=0.2,music_game_backGround="res/backGround.mp3",music_kaiqiang="res/kaiqiang.mp3",music_menu=
"res/music_menu.mp3",qyp_qi_max=1E3,qyp_qi_view_pyX=70,qyp_guai_zong_count=5,qyp_game_zongfenshu=0,qyp_game_zongKill=0,qyp_game_zongMoney=0,qyp_game_qiang_qi=0,qyp_qi_jian=15,qyp_qi_jian_waitTime=0.1,qyp_wofang_hp=200,qyp_init_money=1E3,qyp_qiang_gongji1_start=150,qyp_qiang_gongji1_start_kill_count=60,qyp_qiang_gongji1=50,qyp_qiang_gongji2=250,qyp_qiang_gongji3=90,qyp_qiang_gongji4=150,qyp_qiang_gongji5=1E3,qyp_qiang_sudu1=750,qyp_qiang_sudu2=1400,qyp_qiang_sudu3=500,qyp_qiang_sudu4=200,qyp_qiang_sudu5=
1E3,qyp_qiang_waitTime1=0.15,qyp_qiang_waitTime2=0.5,qyp_qiang_waitTime3=0.2,qyp_qiang_waitTime4=0.6,qyp_qiang_waitTime5=0.2,qyp_qiang_money1=0,qyp_qiang_money2=2E3,qyp_qiang_money3=5E3,qyp_qiang_money4=1E4,qyp_qiang_money5=3E4,qyp_qiang_addQi1=15,qyp_qiang_addQi2=60,qyp_qiang_addQi3=55,qyp_qiang_addQi4=50,qyp_qiang_addQi5=150,qyp_addHp_money=500,qyp_addHp=100,qyp_hp1=100,qyp_hp2=300,qyp_hp3=600,qyp_hp4=450,qyp_hp5=1E3,qyp_yidongSudu1=180,qyp_yidongSudu2=100,qyp_yidongSudu3=60,qyp_yidongSudu4=70,
qyp_yidongSudu5=40,qyp_qyp_guai_bofang1_sudu_Xishu1=1,qyp_qyp_guai_bofang1_sudu_Xishu2=1,qyp_qyp_guai_bofang1_sudu_Xishu3=1,qyp_qyp_guai_bofang1_sudu_Xishu4=1,qyp_qyp_guai_bofang1_sudu_Xishu5=1,qyp_gongji_waitTime=2,qyp_mingzhong_guai_houtui_x=15,qyp_dimian_guai_count_max=5,qyp_createWaitTimeMax=4,qyp_createWaitTimeMin=2,qyp_yidong_jiasudu_max=200,qyp_yidong_jiasudu_fanwei_start=5,qyp_yidong_jiasudu_fanwei_end=10,qyp_yidong_jiasudu__kill_count=10,qyp_createWaitTime_zuiMin=0.5,qyp_createWaitTime_jianshao=
0.045,qyp_guai_gongji1=25,qyp_guai_gongji2=25,qyp_guai_gongji3=18,qyp_guai_gongji4=15,qyp_guai_gongji5=38,qyp_guai_fenshu1=100,qyp_guai_fenshu2=120,qyp_guai_fenshu3=150,qyp_guai_fenshu4=110,qyp_guai_fenshu5=300,qyp_guai_money1=60,qyp_guai_money2=60,qyp_guai_money3=85,qyp_guai_money4=70,qyp_guai_money5=110;var GameOverScene=cc.Layer.extend({rootNode:null,ctor:function(){this._super();this.setTouchEnabled(!0);this.rootNode=ccs.UILayer.create();this.addChild(this.rootNode);var a=ccs.GUIReader.getInstance().widgetFromJsonFile(s_json_gameOver);this.rootNode.addWidget(a);this.setPosition(cc.p(0,0));this.onDidLoadFromCCB()},onEnter:function(){cc.log("onEnter");this._super()},onExit:function(){this._super()}});
GameOverScene.prototype.onMainMenu=function(a,b){b==ccs.TouchEventType.ended&&(playSound(s_anniu),cc.Director.getInstance().replaceScene(new MainMenuScene))};GameOverScene.prototype.onRePlay=function(){playSound(s_anniu)};GameOverScene.prototype.onMoreGame=function(a,b){cc.log("onMore");b==ccs.TouchEventType.ended&&(playSound(s_anniu),openMoreGames())};
GameOverScene.prototype.onDidLoadFromCCB=function(){cc.log("GameOverScene\x3d\x3donDidLoadFromCCB");this.rootNode.getWidgetByName("onOk").addTouchEventListener(this.onMainMenu,this);this.rootNode.getWidgetByName("onMore1").addTouchEventListener(this.onMoreGame,this);this.rootNode.getWidgetByName("onMore2").addTouchEventListener(this.onMoreGame,this);this.setFenshuView()};
GameOverScene.prototype.setFenshuView=function(){var a=sys.localStorage.getItem("highScore");null==a&&(a=0);qyp_game_zongfenshu>a&&sys.localStorage.setItem("highScore",qyp_game_zongfenshu);this.rootNode.getWidgetByTag(201).setText(qyp_game_zongfenshu);this.rootNode.getWidgetByTag(202).setText(qyp_game_zongKill);this.rootNode.getWidgetByTag(203).setText(qyp_game_zongMoney)};GameOverScene.prototype.onResizeViewUpdate=function(a){retrySizeView()};var MainMenuScene=cc.Layer.extend({rootNode:null,ctor:function(){this._super();this.setTouchEnabled(!0);this.rootNode=ccs.UILayer.create();this.addChild(this.rootNode);var a=ccs.GUIReader.getInstance().widgetFromJsonFile(s_json_main);this.rootNode.addWidget(a);this.setPosition(cc.p(0,0));this.onDidLoadFromCCB()},onEnter:function(){cc.log("onEnter");this._super()},onExit:function(){this._super()}});
MainMenuScene.prototype.onPlayGame=function(a,b){cc.log("onPlayGame");b==ccs.TouchEventType.ended&&(playSound(s_anniu),cc.Director.getInstance().replaceScene(new PlayGameScene))};MainMenuScene.prototype.onMoreGame=function(a,b){cc.log("onMore");b==ccs.TouchEventType.ended&&(playSound(s_anniu),openMoreGames())};
MainMenuScene.prototype.onYinyue=function(a,b){if(b==ccs.TouchEventType.ended){var c="yinxiao_on.png";playSound(s_anniu);isYinyueKaiqji?(isYinyueKaiqji=!1,stopAllMusic(),c="yinxiao_off.png"):(isYinyueKaiqji=!0,playMusic(s_backGround,!0));this.rootNode.getWidgetByTag(301).loadTexture(c,1)}};
MainMenuScene.prototype.onYinxiao=function(a,b){if(b==ccs.TouchEventType.ended){var c="shengyin_on.png";playSound(s_anniu);isYinxiaoKaiqji?(isYinxiaoKaiqji=!1,stopAllSound(),c="shengyin_off.png"):isYinxiaoKaiqji=!0;this.rootNode.getWidgetByTag(302).loadTexture(c,1)}};
MainMenuScene.prototype.onDidLoadFromCCB=function(){cc.log("MainMenuScene\x3d\x3donDidLoadFromCCB");cc.Director.getInstance().resume();loadGameMyAds();this.rootNode.getWidgetByName("onPlay").addTouchEventListener(this.onPlayGame,this);this.rootNode.getWidgetByName("onMore1").addTouchEventListener(this.onMoreGame,this);this.rootNode.getWidgetByName("onMore2").addTouchEventListener(this.onMoreGame,this);this.rootNode.getWidgetByName("onYinxiao").addTouchEventListener(this.onYinxiao,this);this.rootNode.getWidgetByName("onYinyue").addTouchEventListener(this.onYinyue,
this);playMusic(s_backGround,!0);this.updateShengyinView();this.rootNode.schedule(this.onResizeViewUpdate,qyp_resize_waitTime);var a=sys.localStorage.getItem("highScore");null==a&&(a=0);this.rootNode.getWidgetByTag(160).setText(a)};MainMenuScene.prototype.onResizeViewUpdate=function(a){retrySizeView()};
MainMenuScene.prototype.updateShengyinView=function(){var a="shengyin_on.png";isYinxiaoKaiqji||(a="shengyin_off.png");var b=this.rootNode.getWidgetByTag(302);b.loadTexture(a,1);a="yinxiao_on.png";isYinyueKaiqji||(a="yinxiao_off.png");b=this.rootNode.getWidgetByTag(301);b.loadTexture(a,1)};function test(){alert("11");for(var a=+new Date;a+5E3>+new Date;);alert("2")};Array.prototype.clear=function(){this.length=0};Array.prototype.insertAt=function(a,b){this.splice(a,0,b)};Array.prototype.removeAt=function(a){this.splice(a,1)};Array.prototype.remove=function(a){a=this.indexOf(a);0<=a&&this.removeAt(a)};function getRandomNum(a,b){switch(arguments.length){case 1:return parseInt(Math.random()*a+1);case 2:return parseInt(Math.random()*(b-a+1)+a);default:return 0}}
function getSpriteRect(a){var b=a.getContentSize();a=a.getPosition();return cc.rect(a.x-b.width/2,a.y-b.height/2,b.width,b.height)}function stopAllSound(a){cc.AudioEngine.getInstance().stopAllEffects()}function playSound(a){isYinxiaoKaiqji&&cc.AudioEngine.getInstance().playEffect(a,!1)}function playMusic(a,b){isYinyueKaiqji&&cc.AudioEngine.getInstance().playMusic(a,b)}function stopAllMusic(a,b){cc.AudioEngine.getInstance().stopMusic()}
function retrySizeView(){var a=document.documentElement.clientWidth,b=document.documentElement.clientHeight;if(a!=qyp_view_width||b!=qyp_view_height)qyp_view_width=a,qyp_view_height=b,a=cc.size(480,320),cc.EGLView.getInstance().setDesignResolutionSize(a.width,a.height,cc.RESOLUTION_POLICY.SHOW_ALL)}
function playArmature(a,b){switch(b){case 0:a.getAnimation().play("daiji");break;case 1:a.getAnimation().play("dead");break;case 2:a.getAnimation().play("kaiqiang");break;case 3:a.getAnimation().play("zoulu");break;case 4:a.getAnimation().play("gongji")}}
function loadArmtrueXml(){ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_png,s_gameDonghua_plist,s_duizhang_up);ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_png,s_gameDonghua_plist,s_duizhang_down);ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_hushi_png,s_gameDonghua_hushi_plist,s_jiangshi1);ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_hushi_png,s_gameDonghua_hushi_plist,s_jiangshi2);ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_hushi_png,
s_gameDonghua_hushi_plist,s_jiangshi3);ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_hushi_png,s_gameDonghua_hushi_plist,s_jiangshi4);ccs.ArmatureDataManager.getInstance().addArmatureFileInfo(s_gameDonghua_hushi_png,s_gameDonghua_hushi_plist,s_jiangshi5)}function getnAngleByPot(a,b){var c=a.x-b.x,d=a.y-b.y,e=cc.RADIANS_TO_DEGREES(Math.atan(c/d));0>d&&(e=0>c?180+Math.abs(e):180-Math.abs(e));e+=90;180<e&&270>e?e=270:90<e&&180>e&&(e=90);return e}
function distanceByPotAndPot(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function openMoreGames(){window.open("http://www.a10.com","_blank").focus()}var game_loadAdsApi=null,fnPause=function(){cc.log("\x3d\x3dfnPause\x3d\x3d")},fnResume=function(){cc.log("\x3d\x3dfnResume\x3d\x3d")};function loadGameMyAds(){null!=game_loadAdsApi&&game_loadAdsApi.GameBreak.request(fnPause,fnResume)}setTimeout(initGameAds,1E3);
function initGameAds(){GameAPI.loadAPI(function(a){game_loadAdsApi=a;a.Branding.getLogo()})};var MyCustomSprite=cc.Sprite.extend({pCustomData:null,hpDituSprite:null,hpSprite:null,aP:null,bP:null,randFlag:null,init:function(a,b){var c=!1;this._super()&&(c=!0,this.initWithFile(a,b),this.pCustomData=CustomData.create());return c}});MyCustomSprite.create=function(a,b){var c=new MyCustomSprite;return c&&c.init(a,b)?c:null};
MyCustomSprite.createWithSpriteFrameName=function(a){var b=null;if("string"==typeof a){if(b=cc.SpriteFrameCache.getInstance().getSpriteFrame(a),!b)return cc.log("Invalid spriteFrameName: "+a),null}else return cc.log("Invalid argument. Expecting string."),null;return(a=new MyCustomSprite)&&a.initWithSpriteFrame(b)?(a.pCustomData=CustomData.create(),a):null};var MyCustomArmature=ccs.Armature.extend({pCustomData:null,hpDituSprite:null,hpSprite:null,aP:null,bP:null,randFlag:null,myInit:function(a,b){var c=!1,c=!0;this.init(a,b);this.pCustomData=CustomData.create();return c}});MyCustomArmature.create=function(a,b){var c=new MyCustomArmature;return c&&c.myInit(a,b)?c:null};var myLoad_logoData="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAAArCAMAAAAJ4TmoAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIzMDZERjdENkQ3OTExRTRBMDIwQTgyMjJEQzAyREI0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIzMDZERjdFNkQ3OTExRTRBMDIwQTgyMjJEQzAyREI0Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QjMwNkRGN0I2RDc5MTFFNEEwMjBBODIyMkRDMDJEQjQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QjMwNkRGN0M2RDc5MTFFNEEwMjBBODIyMkRDMDJEQjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz52VtcuAAAABlBMVEX+bRsAAABsRaLEAAAAAnRSTlP/AOW3MEoAAAHySURBVHja1JnbcsQgDEPl///pzk6nTTAylg1746WZbIETMLIA2L3AvqMMnHiUflP4Fur/GldVqNXwLmqM1Ph9qHztPjV2xxpyGx9Jjc+lxr3Y8Cdt5TR1D/oG+3ZqFKiZnGTUbXYQBlu8S6j/sIvz1KHmM+3fr3seIiP+ziiycIQabDSTdJH+O1blFDVkahEDx7AL1KgwEIpyhWQ1zovKJQzfLISSU7v3ZWrvJC5qLoqdMZvnsZ+UESZnMh5Jhll3jmnl8p8OUJtETZpI3Cmdu9dQT2PEYotnXkbdiRBUqN0K9r3HksMxsUdtLWoulvYO6lUvh6nxMurUBJhM3cyNrlEmY0+kxi517H2jCLHIJ5pI3XdPHWoncp5azDI7TpU5Tk1C5kWQUut+UqS2Y9RFU9vay7DVUZfrbKztHLQh2JJYR64TQTjFPFCTrLzIXS2vfIbZW+vASyySXbSrF89+hOMSNnwKdboPJPvvrVOcKOYuJx9+jlepdOgCH1g/CqbZdqLmfj0JwHgzo2DL1IHIDwI922zxEEffiHWpQefV1kdPuvpKdnl/rAMflITp4jD1WdT3uF7E5CpII7E+QM00ZHzG7CjIiaIqYYlU6pty7zfdM7wFKV/XpTuAJ1yC6ddWlXSxpyHFm7tj1FK9jV5/BBgAnscUObaSGr0AAAAASUVORK5CYII=";
cc.MyLoaderScene=cc.Scene.extend({_logo:null,_logoTexture:null,_texture2d:null,_bgLayer:null,_label:null,_winSize:null,_processLayer:null,_processLayerLength:null,ctor:function(){cc.Scene.prototype.ctor.call(this);this._winSize=cc.Director.getInstance().getWinSize()},init:function(){cc.Scene.prototype.init.call(this);var a=cc.p(this._winSize.width/2,this._winSize.height/2);this._logoTexture=new Image;var b=this;this._logoTexture.addEventListener("load",function(){b._initStage(a);this.removeEventListener("load",
arguments.callee,!1)});this._logoTexture.src=myLoad_logoData;this._logoTexture.width=286;this._logoTexture.height=90;this._bgLayer=cc.LayerColor.create(cc.c4(32,32,32,255));this._bgLayer.setPosition(0,0);this.addChild(this._bgLayer,0);this._label=cc.LabelTTF.create("Loading... 0%","Arial",14);this._label.setColor(cc.c3(180,180,180));this._label.setOpacity(0);this._label.setPosition(cc.pAdd(a,cc.p(0,-110)));this._bgLayer.addChild(this._label,10)},_initStage:function(a){this._texture2d=new cc.Texture2D;
this._texture2d.initWithElement(this._logoTexture);this._texture2d.handleLoadedTexture();this._logo=cc.Sprite.createWithTexture(this._texture2d);this._logo.setPosition(a);this._bgLayer.addChild(this._logo,10);this._logoFadeIn()},onEnter:function(){cc.Node.prototype.onEnter.call(this);this.schedule(this._startLoading,0.3)},onExit:function(){cc.Node.prototype.onExit.call(this);this._label.setString("Loading... 0%")},initWithResources:function(a,b,c){this.resources=a;this.selector=b;this.target=c},_startLoading:function(){this.unschedule(this._startLoading);
cc.Loader.preload(this.resources,this.selector,this.target);this.schedule(this._updatePercent)},_logoFadeIn:function(){var a=cc.Spawn.create(cc.EaseBounce.create(cc.MoveBy.create(0.25,cc.p(0,10))),cc.FadeIn.create(0.5)),b=cc.Sequence.create(cc.DelayTime.create(0.15),a.clone());this._logo.runAction(a);this._label.runAction(b)},_updatePercent:function(){var a=cc.Loader.getInstance().getPercentage();this._label.setString("Loading... "+a+"%");100<=a&&this.unschedule(this._updatePercent)}});
cc.MyLoaderScene.preload=function(a,b,c){this._instance||(this._instance=new cc.MyLoaderScene,this._instance.init());this._instance.initWithResources(a,b,c);a=cc.Director.getInstance();a.getRunningScene()?a.replaceScene(this._instance):a.runWithScene(this._instance);return this._instance};var WelcomeScene=function(){},WelcomeScene=cc.Scene.extend({rootNode:null,ctor:function(){this._super();this.rootNode=ccs.UILayer.create();this.addChild(this.rootNode);var a=ccs.GUIReader.getInstance().widgetFromJsonFile(s_json_welcome);this.rootNode.addWidget(a);this.setPosition(cc.p(0,0));this.onDidLoadFromCCB()}});WelcomeScene.prototype.onMoreGame=function(a,b){cc.log("onMore");b==ccs.TouchEventType.ended&&window.open("http://www.a10.com")};
WelcomeScene.prototype.onDidLoadFromCCB=function(){cc.log("WelcomeScene\x3d\x3donDidLoadFromCCB");this.rootNode.getWidgetByName("onPlay").addTouchEventListener(this.onMoreGame,this);cc.AudioEngine.getInstance().preloadEffect(s_kaiqiang1);cc.AudioEngine.getInstance().preloadEffect(s_kaiqiang2);cc.AudioEngine.getInstance().preloadEffect(s_kaiqiang3);cc.AudioEngine.getInstance().preloadEffect(s_kaiqiang4);cc.AudioEngine.getInstance().preloadEffect(s_kaiqiang5);cc.AudioEngine.getInstance().preloadMusic(s_backGround);
cc.AudioEngine.getInstance().preloadMusic(s_anniu);cc.AudioEngine.getInstance().preloadMusic(s_zhujueDead);cc.AudioEngine.getInstance().preloadMusic(s_jiangshiDead);this.rootNode.schedule(this.onResizeViewUpdate,qyp_resize_waitTime);this.rootNode.schedule(this.onToMian,3)};WelcomeScene.prototype.onResizeViewUpdate=function(a){retrySizeView()};WelcomeScene.prototype.onToMian=function(a){cc.Director.getInstance().replaceScene(new MainMenuScene)};var Tag_PlayGameScene_duizhang_up=20,Tag_PlayGameScene_duizhang_down=21,Tag_PlayGameScene_anniu_layer=350,Tag_PlayGameScene_duizhang_layer=800,ActionTag_PlayGameScene_lianxuFashePaodan=10,PlayGameScene=cc.Layer.extend({rootNode:null,ctor:function(){this._super();this.initParam();this.setKeyboardEnabled(!0);this.setTouchEnabled(!0);cc.log("load \x3d\x3d PlayGameScene");this.rootNode=ccs.UILayer.create();this.addChild(this.rootNode);var a=ccs.GUIReader.getInstance().widgetFromJsonFile(s_json_playGame);
this.rootNode.addWidget(a);this.setPosition(cc.p(0,0));this.onDidLoadFromCCB()},onEnter:function(){cc.log("onEnter");this._super()},onExit:function(){this._super()}});
PlayGameScene.prototype.initParam=function(){cc.log("PlayGameScenePlayGameScenePlayGameScene");this.duizhangArmatureDown=this.duizhangArmatureUp=this.wofangHpDituSprite=this.wofangHpSprite=this.zhunxingSprite=null;this.isLianxuFashe=!1;this.isPaodanJiangeYunxu=!0;this.touchPot=cc.p(0,0);this.isShowZhunxing=!1;this.guaiArray=[];this.paodanArray=[];this.removeGuaiArray=[];this.removePaodanArray=[];this.createWaitTime=qyp_createWaitTimeMax;this.wofangZongHp=this.wofangHp=qyp_wofang_hp;this.isGameOver=
this.isWofangDead=!1;this.qiangSprite=this.lizhiPar=null;this.qiangDengji=1;this.isQiangLocked1=!1;this.isQiangLocked5=this.isQiangLocked4=this.isQiangLocked3=this.isQiangLocked2=!0;qyp_game_zongMoney=qyp_init_money;qyp_game_qiang_qi=qyp_game_zongfenshu=qyp_game_zongKill=0;this.qiangQiStartPot=this.qiangQiSprite=this.anniuLayer=null;this.dimianGuaiCount=0;this.duizhangLayer=null;this.jianqiCishu=0;this.zhuanquMoney=qyp_init_money};
PlayGameScene.prototype.onZanting=function(a,b){if(!this.isGameOver&&b==ccs.TouchEventType.ended){playSound(s_anniu);var c=this.rootNode.getWidgetByTag(990),d=this.rootNode.getWidgetByTag(996),e="bofang.png";cc.Director.getInstance().isPaused()?(e="zanting.png",d.setVisible(!1),d.setTouchEnabled(!1),qyp_isgame_pause=!1,cc.Director.getInstance().resume()):(d.setVisible(!0),d.setTouchEnabled(!0),loadGameMyAds(),qyp_isgame_pause=!0,cc.Director.getInstance().pause());c.loadTexture(e,1)}};
PlayGameScene.prototype.onChongwan=function(){this.execRetry()};PlayGameScene.prototype.onMoreGame=function(a,b){cc.log("onMore");b==ccs.TouchEventType.ended&&(playSound(s_anniu),openMoreGames())};PlayGameScene.prototype.onTouchView=function(a,b){cc.log("onTouchView");if(b==ccs.TouchEventType.began)this.onTouchesBegan(a,b);else if(b==ccs.TouchEventType.moved)this.onTouchesMoved(a,b);else if(b==ccs.TouchEventType.ended)this.onTouchesEnded(a,b)};
PlayGameScene.prototype.onSelectDaoju=function(a,b){if(b==ccs.TouchEventType.ended&&(playSound(s_anniu),!this.isGameOver)){var c=a.getTag();136==c?!this.isWofangDead&&this.wofangHp!=this.wofangZongHp&&qyp_game_zongMoney>=qyp_addHp_money&&(qyp_game_zongMoney-=qyp_addHp_money,this.updateGameData(),c=this.wofangHp+qyp_addHp,c>this.wofangZongHp&&(c=this.wofangZongHp),this.wofangHp=c,this.wofangHpSprite.setScaleX(c/this.wofangZongHp)):(this.removeSelectXiaoguo(),this.clickQiangAnniu(c-130))}};
PlayGameScene.prototype.onDidLoadFromCCB=function(){cc.log("PlayGameScene\x3d\x3donDidLoadFromCCB");this.initLoadGame()};
PlayGameScene.prototype.initLoadGame=function(){cc.log("PlayGameScene\x3d\x3dinitLoadGame");loadArmtrueXml();var a=cc.p(64,185),b=cc.p(63,184);this.duizhangArmatureUp=MyCustomArmature.create("duizhang_up");playArmature(this.duizhangArmatureUp,0);var c=this.duizhangArmatureUp.getContentSize().width,d=this.duizhangArmatureUp.getContentSize().height;this.duizhangLayer=this.rootNode.getWidgetByTag(Tag_PlayGameScene_duizhang_layer);this.duizhangLayer.setPosition(a);this.duizhangLayer.setZOrder(2);this.duizhangLayer.setContentSize(new cc.Size(c,
d));this.duizhangArmatureUp.getAnimation().setMovementEventCallFunc(this.animationEvent,this);this.duizhangArmatureUp.setPosition(cc.p(0,0));this.duizhangArmatureUp.setPosition(a);this.rootNode.addChild(this.duizhangArmatureUp,2);this.duizhangArmatureDown=MyCustomArmature.create("duizhang_down");this.duizhangArmatureDown.getAnimation().playByIndex(0);this.duizhangArmatureDown.setPosition(b);this.rootNode.addChild(this.duizhangArmatureDown,1);this.anniuLayer=ccs.UILayer.create();this.addChild(this.anniuLayer,
400);a=this.rootNode.getWidgetByTag(Tag_PlayGameScene_anniu_layer);a.setZOrder(400);this.anniuLayer.addWidget(a);this.anniuLayer.getWidgetByName("qiang1").addTouchEventListener(this.onSelectDaoju,this);this.anniuLayer.getWidgetByName("qiang2").addTouchEventListener(this.onSelectDaoju,this);this.anniuLayer.getWidgetByName("qiang3").addTouchEventListener(this.onSelectDaoju,this);this.anniuLayer.getWidgetByName("qiang4").addTouchEventListener(this.onSelectDaoju,this);this.anniuLayer.getWidgetByName("qiang5").addTouchEventListener(this.onSelectDaoju,
this);this.anniuLayer.getWidgetByName("qiang6").addTouchEventListener(this.onSelectDaoju,this);this.rootNode.getWidgetByName("onMore2").addTouchEventListener(this.onMoreGame,this);this.anniuLayer.getWidgetByName("onZanting").addTouchEventListener(this.onZanting,this);this.rootNode.getWidgetByName("onMore3").addTouchEventListener(this.onMoreGame,this);this.rootNode.getWidgetByTag(996).setVisible(!1);this.initGameData();this.createZhunxing();this.removeSelectXiaoguo();this.clickQiangAnniu(1);this.wofangHpSprite=
this.rootNode.getWidgetByTag(300);this.wofangHpDituSprite=this.rootNode.getWidgetByTag(301);this.startGame();this.qiangQiSprite=this.rootNode.getWidgetByTag(600);this.qiangQiStartPot=this.qiangQiSprite.getPosition();a=cc.DelayTime.create(qyp_qi_jian_waitTime);b=cc.CallFunc.create(this.jianQiangqiFun,this,10);a=cc.RepeatForever.create(cc.Sequence.create(a,b));a.setTag(12);this.rootNode.runAction(a);this.updateGameDataView();this.schedule(this.onUpdate,1/30);this.schedule(this.onResizeViewUpdate,qyp_resize_waitTime)};
PlayGameScene.prototype.initGameData=function(){for(var a=this.anniuLayer,b=0;4>b;b++){var c=a.getWidgetByTag(142+b),d=qyp_qiang_money2;switch(b){case 0:d=qyp_qiang_money2;break;case 1:d=qyp_qiang_money3;break;case 2:d=qyp_qiang_money4;break;case 3:d=qyp_qiang_money5}c.setText(d)}this.updateGameData()};
PlayGameScene.prototype.updateGameDataView=function(){for(var a=this.anniuLayer,b=0;4>b;b++){var c=a.getWidgetByTag(142+b),d=qyp_qiang_money2;switch(b){case 0:d=qyp_qiang_money2;break;case 1:d=qyp_qiang_money3;break;case 2:d=qyp_qiang_money4;break;case 3:d=qyp_qiang_money5}qyp_game_zongMoney>=d?c.setColor(cc.YELLOW):c.setColor(cc.GRAY);c.setText(d)}this.updateGameData()};
PlayGameScene.prototype.initDonghua=function(){var a=cc.TextureCache.getInstance().addImage(qyp_imagePath+"qiang1.png"),b=cc.TextureCache.getInstance().addImage(qyp_imagePath+"qiang2.png"),c=cc.TextureCache.getInstance().addImage(qyp_imagePath+"qiang3.png"),a=cc.SpriteFrame.createWithTexture(a,cc.rect(0,0,108,92)),b=cc.SpriteFrame.createWithTexture(b,cc.rect(0,0,108,92)),c=cc.SpriteFrame.createWithTexture(c,cc.rect(0,0,108,92)),d=[];d.push(a);d.push(b);d.push(c);a=cc.Animation.create(d,0.2);a=cc.Animate.create(a);
a=cc.RepeatForever.create(a);this.qiangSprite=this.rootNode.getWidgetByTag(550);this.qiangSprite.setVisible(!1);this.qiangSprite.runAction(a)};PlayGameScene.prototype.updateGameData=function(){var a=this.anniuLayer,b=a.getWidgetByTag(146),c=a.getWidgetByTag(147),a=a.getWidgetByTag(148);b.setText(qyp_game_zongMoney);c.setText(qyp_game_zongKill);a.setText(qyp_game_zongfenshu)};
PlayGameScene.prototype.getGuaiName=function(a){var b="";switch(a){case 1:b="hushiAN";break;case 2:b="hushiAN";break;case 3:b="hushiAN";break;case 4:b="hushiAN";break;case 5:b="hushiAN"}return b};
PlayGameScene.prototype.changeQiang=function(a){var b="zhujue-qiang1.png",c="zhujue-qiangkou1.png";switch(a){case 1:b="zhujue-qiang1.png";c="zhujue-qiangkou1.png";break;case 2:b="zhujue-qiang2.png";c="zhujue-qiangkou2.png";break;case 3:b="zhujue-qiang3.png";c="zhujue-qiangkou3.png";break;case 4:b="zhujue-qiang4.png";c="zhujue-qiangkou4.png";break;case 5:b="zhujue-qiang5.png",c="zhujue-qiangkou5.png"}a=MyCustomSprite.createWithSpriteFrameName(b);this.duizhangArmatureUp.getBone("qiang1").addDisplay(a,
0);this.duizhangArmatureUp.getBone("qiang1").changeDisplayByIndex(0,!0);c=MyCustomSprite.createWithSpriteFrameName(c);this.duizhangArmatureUp.getBone("qiangkou1").addDisplay(c,0);this.duizhangArmatureUp.getBone("qiangkou1").changeDisplayByIndex(0,!0)};
PlayGameScene.prototype.clickQiangAnniu=function(a){var b=!0,c=0,d=!1,e=this.anniuLayer;switch(a){case 1:c=qyp_qiang_money1;d=this.isQiangLocked1;break;case 2:c=qyp_qiang_money2;d=this.isQiangLocked2;break;case 3:c=qyp_qiang_money3;d=this.isQiangLocked3;break;case 4:c=qyp_qiang_money4;d=this.isQiangLocked4;break;case 5:c=qyp_qiang_money5,d=this.isQiangLocked5}if(d)if(qyp_game_zongMoney>=c)switch(qyp_game_zongMoney-=c,this.updateGameData(),a){case 1:this.isQiangLocked1=!1;break;case 2:this.isQiangLocked2=
!1;break;case 3:this.isQiangLocked3=!1;break;case 4:this.isQiangLocked4=!1;break;case 5:this.isQiangLocked5=!1}else b=!1;b?(b=e.getWidgetByTag(111+a-1),c=e.getWidgetByTag(111+a-1+10),d="anniu_qiang"+a+".png",b.loadTexture("anniu_xuanzhong.png",1),c.loadTexture(d,1),null!=e.getWidgetByTag(141+a-1)&&e.getWidgetByTag(141+a-1).setVisible(!1),this.qiangDengji=a,this.changeQiang(this.qiangDengji),playArmature(this.duizhangArmatureUp,0)):(b=e.getWidgetByTag(111+this.qiangDengji-1),b.loadTexture("anniu_xuanzhong.png",
1))};PlayGameScene.prototype.removeSelectXiaoguo=function(){for(var a=this.anniuLayer,b=0;5>b;b++)a.getWidgetByTag(111+b).loadTexture("anniu_meixuanzhong.png",1)};
PlayGameScene.prototype.baozhaDonghua=function(a){var b=cc.TextureCache.getInstance().addImage(qyp_imagePath+"baozha1.png"),c=cc.TextureCache.getInstance().addImage(qyp_imagePath+"baozha2.png"),d=cc.TextureCache.getInstance().addImage(qyp_imagePath+"baozha3.png"),e=cc.TextureCache.getInstance().addImage(qyp_imagePath+"baozha4.png"),b=cc.SpriteFrame.createWithTexture(b,cc.rect(0,0,120,117)),c=cc.SpriteFrame.createWithTexture(c,cc.rect(0,0,120,117)),d=cc.SpriteFrame.createWithTexture(d,cc.rect(0,0,
120,117)),e=cc.SpriteFrame.createWithTexture(e,cc.rect(0,0,120,117)),f=[];f.push(b);f.push(c);f.push(d);f.push(e);b=cc.Animation.create(f,0.2);b=cc.Animate.create(b);e=cc.CallFunc.create(this.deleteSpriteFun,this,2);b=cc.Sequence.create(b,e);a.pCustomData.isDead=!0;a.pCustomData.hpSprite.setVisible(!1);a.pCustomData.hpDituSprite.setVisible(!1);this.startGuaiGongji(a);a.runAction(b)};PlayGameScene.prototype.startGame=function(){this.zhunbeiCreateGuai()};PlayGameScene.prototype.setFenshuView=function(){this.rootNode.getWidgetByTag(160).setText(qyp_game_zongfenshu)};
PlayGameScene.prototype.zhunbeiCreateGuai=function(){var a=cc.DelayTime.create(qyp_guai_startgame_waitTime),b=cc.CallFunc.create(this.startCreateGuaiFun,this,2),a=cc.Sequence.create(a,b);this.rootNode.runAction(a)};
PlayGameScene.prototype.startCreateGuaiFun=function(a,b){this.startCreateGuai();var c=getRandomNum(qyp_createWaitTimeMin,qyp_createWaitTimeMax),d=parseInt(qyp_game_zongKill/qyp_yidong_jiasudu__kill_count),c=c-qyp_createWaitTime_jianshao*d;c<qyp_createWaitTime_zuiMin&&(c=qyp_createWaitTime_zuiMin);c=cc.DelayTime.create(c);d=cc.CallFunc.create(this.startCreateGuaiFun,this,b);c=cc.Sequence.create(c,d);this.rootNode.runAction(c)};
PlayGameScene.prototype.createZhunxing=function(){this.zhunxingSprite=MyCustomSprite.create(qyp_imagePath+"zhunxing.png");this.zhunxingSprite.setPosition(cc.p(240,160));this.zhunxingSprite.setAnchorPoint(cc.p(0.5,0.5));this.zhunxingSprite.setVisible(!1);this.rootNode.addChild(this.zhunxingSprite,320)};PlayGameScene.prototype.startCreateGuai=function(){this.createGuai()};
PlayGameScene.prototype.createGuai=function(){var a=getRandomNum(0,4);this.dimianGuaiCount+1>qyp_dimian_guai_count_max&&(a=getRandomNum(0,1));var b="",c=qyp_yidongSudu1,d=qyp_hp1,e=qyp_guai_gongji1,f=qyp_guai_fenshu1,g=qyp_guai_money1,h=!1,k=qyp_qyp_guai_bofang1_sudu_Xishu1,p=0.5;switch(a){case 0:b="funvAN";h=!0;c=qyp_yidongSudu1;d=qyp_hp1;e=qyp_guai_gongji1;f=qyp_guai_fenshu1;g=qyp_guai_money1;k=qyp_qyp_guai_bofang1_sudu_Xishu1;break;case 1:b="hushiAN";h=!0;c=qyp_yidongSudu2;d=qyp_hp2;e=qyp_guai_gongji2;
f=qyp_guai_fenshu2;g=qyp_guai_money2;k=qyp_qyp_guai_bofang1_sudu_Xishu2;break;case 2:b="qigaiAN";h=!1;c=qyp_yidongSudu3;d=qyp_hp3;e=qyp_guai_gongji3;f=qyp_guai_fenshu3;g=qyp_guai_money3;k=qyp_qyp_guai_bofang1_sudu_Xishu3;break;case 3:b="dahengAN";h=!1;c=qyp_yidongSudu4;d=qyp_hp4;e=qyp_guai_gongji4;f=qyp_guai_fenshu4;g=qyp_guai_money4;k=qyp_qyp_guai_bofang1_sudu_Xishu4;break;case 4:b="quanwangAN",h=!1,p=0.4,c=qyp_yidongSudu5,d=qyp_hp5,e=qyp_guai_gongji5,f=qyp_guai_fenshu5,g=qyp_guai_money5,k=qyp_qyp_guai_bofang1_sudu_Xishu5}var n=
402;h&&(n=1==getRandomNum(0,1)?401:400);var m=qyp_createX,l=this.rootNode.getWidgetByTag(n).getPosition().y,m=cc.p(m,l),b=MyCustomArmature.create(b);playArmature(b,3);l=parseInt(qyp_game_zongKill/qyp_yidong_jiasudu__kill_count)*getRandomNum(qyp_yidong_jiasudu_fanwei_start,qyp_yidong_jiasudu_fanwei_end);l>qyp_yidong_jiasudu_max&&(l=qyp_yidong_jiasudu_max);l=getRandomNum(c,c+l);k=k*l/c;c=l;b.getAnimation().setAnimationScale(k);b.getAnimation().setMovementEventCallFunc(this.animationEvent,this);b.setPosition(m);
b.setScale(p);b.setAnchorPoint(cc.p(0.5,0));this.rootNode.addChild(b,3);b.pCustomData.zongHp=d;b.pCustomData.hp=d;b.pCustomData.gongji=e;b.pCustomData.fenshu=f;b.pCustomData.randFlag=a;b.pCustomData.sudu=c;b.pCustomData.money=g;b.pCustomData.isFly=h;b.pCustomData.tagY=n;this.guaiArray.push(b);a=MyCustomSprite.create(qyp_imagePath+"xuetiaoditu.png");c=this.getHpPoint(b);c=cc.p(c.x+100,c.y);a.setPosition(c);a.setAnchorPoint(cc.p(0,0.5));this.rootNode.addChild(a,320-m.y);d=MyCustomSprite.create(qyp_imagePath+
"xuetiao.png");d.setPosition(c);d.setAnchorPoint(cc.p(0,0.5));this.rootNode.addChild(d,320-m.y);b.pCustomData.hpDituSprite=a;b.pCustomData.hpSprite=d;this.createGuaiAction(b);h||(this.dimianGuaiCount+=1,this.dimianGuaiCount>qyp_yidong_jiasudu_max&&(this.dimianGuaiCount=qyp_yidong_jiasudu_max))};
PlayGameScene.prototype.createGuaiAction=function(a){if(!a.pCustomData.isDead){var b=this.rootNode.getWidgetByTag(a.pCustomData.tagY).getPosition();if(!a.pCustomData.isFly){var c=10*getRandomNum(1,2),d=getRandomNum(0,2);0==d?c*=-1:2==d&&(c=0);b=cc.p(b.x+c,b.y)}var d=a.getPosition(),c=a.pCustomData.sudu,e=distanceByPotAndPot(d,b),d=cc.MoveTo.create(e/c,b);cc.CallFunc.create(this.moveFinishFun,this,2);var f=cc.CallFunc.create(this.guaiGongjiFun,this,2),e=cc.Sequence.create(d,f),g=null;a.pCustomData.isFly&&
(g=this.rootNode.getWidgetByTag(403).getPosition(),e=distanceByPotAndPot(b,g),g=cc.MoveTo.create(e/c,g),e=cc.Sequence.create(d,g,f));a.runAction(e)}};PlayGameScene.prototype.guaiGongjiFun=function(a,b){playArmature(a,4)};PlayGameScene.prototype.moveFinishFun=function(a,b){this.killPaodan(a)};PlayGameScene.prototype.startGongjiFun=function(a,b){this.startGuaiGongji(a);var c=cc.DelayTime.create(qyp_guai_gongji_waitTime),d=cc.CallFunc.create(this.startGongjiFun,this,b),c=cc.Sequence.create(c,d);a.runAction(c)};
PlayGameScene.prototype.startGuaiGongji=function(a){this.isWofangDead||(a=this.wofangHp-a.pCustomData.gongji,0>=a?this.killWofang():(this.wofangHp=a,this.wofangHpSprite.setScaleX(a/this.wofangZongHp)))};PlayGameScene.prototype.deleteSpriteFun=function(a,b){a.stopAllActions();a.setVisible(!1);this.execRemove(a)};
PlayGameScene.prototype.getHpPoint=function(a){var b=a.getPosition(),b=cc.p(b.x-a.getContentSize().width/4+5,b.y+a.getContentSize().height/2+10);4==a.pCustomData.randFlag?b=cc.p(b.x+13,b.y-25):3==a.pCustomData.randFlag&&(b=cc.p(b.x+7,b.y));return b};
PlayGameScene.prototype.mingzhongGuai=function(a,b){if(!a.pCustomData.isDead){var c=!1;if(4==b.pCustomData.dengji)for(var d=b.pCustomData.mingzhongGuaiArray.length,e=0;e<d;e++){if(b.pCustomData.mingzhongGuaiArray[e]==a){c=!0;break}}else this.killPaodan(b);c||(c=a.pCustomData.hp-b.pCustomData.gongji,0>=c?this.killGuai(a):(a.pCustomData.hp=c,a.pCustomData.hpSprite.setScaleX(c/a.pCustomData.zongHp),a.pCustomData.isYijingGongji||(a.stopAllActions(),c=a.getPosition(),a.setPosition(cc.p(c.x+qyp_mingzhong_guai_houtui_x,
c.y)),this.createGuaiAction(a))),4==b.pCustomData.dengji&&b.pCustomData.mingzhongGuaiArray.push(a))}};PlayGameScene.prototype.startZhujiaoXingwei=function(){this.duizhangArmatureUp.runAction(cc.RotateTo.create(0.01,0));playArmature(this.duizhangArmatureUp,1);playArmature(this.duizhangArmatureDown,1)};
PlayGameScene.prototype.startGuaiXingwei=function(){for(var a=this.guaiArray.length,b=0;b<a;b++){var c=this.guaiArray[b];if(!c.pCustomData.isDead){var d=cc.MoveTo.create(c.pCustomData.yidongTime,cc.p(-100,c.getPositionY())),d=cc.Sequence.create(d);c.runAction(d)}}};PlayGameScene.prototype.stopAllGuaiAction=function(){for(var a=this.guaiArray.length,b=0;b<a;b++){var c=this.guaiArray[b];c.pCustomData.isDead||(c.stopAllActions(),playArmature(c,0))}};
PlayGameScene.prototype.killGuai=function(a){a.pCustomData.isDead||(a.pCustomData.isDead=!0,a.stopAllActions(),playArmature(a,1),a.pCustomData.hpSprite.setVisible(!1),a.pCustomData.hpDituSprite.setVisible(!1),a.pCustomData.isPass||(playSound(s_jiangshiDead),qyp_game_zongfenshu+=a.pCustomData.fenshu,qyp_game_zongKill+=1,qyp_game_zongMoney+=a.pCustomData.money,this.zhuanquMoney+=a.pCustomData.money,this.updateGameData(),this.updateGameDataView()),a.pCustomData.isFly||(this.dimianGuaiCount-=1,0>this.dimianGuaiCount&&
(this.dimianGuaiCount=0)),this.execRemove(a,1))};PlayGameScene.prototype.killGuaiWancheng=function(a){a.stopAllActions();a.setVisible(!1)};PlayGameScene.prototype.killPaodan=function(a){a.pCustomData.isDead||(a.pCustomData.isDead=!0,a.stopAllActions(),a.setVisible(!1),this.execRemove(a,2))};
PlayGameScene.prototype.killWofang=function(){this.isWofangDead||(this.isWofangDead=!0,this.wofangHpSprite.setVisible(!1),playSound(s_zhujueDead),this.isGameOver=!0,this.stopAllGuaiAction(),this.rootNode.unscheduleUpdate(),this.rootNode.stopAllActions(),this.startZhujiaoXingwei(),this.isShowZhunxing=!1,this.zhunxingSprite.setVisible(!1),this.execGameOver())};
PlayGameScene.prototype.execRemove=function(a,b){var c=cc.DelayTime.create(qyp_exec_remove_waitTime),d=cc.CallFunc.create(this.execRemoveFun,this,b),c=cc.Sequence.create(c,d);a.runAction(c)};PlayGameScene.prototype.execRemoveFun=function(a,b){1==b?this.removeGuaiArray.push(a):2==b&&this.removePaodanArray.push(a)};
PlayGameScene.prototype.execRetry=function(){cc.Director.getInstance().resume();this.stopAllGuaiAction();this.rootNode.unscheduleUpdate();this.rootNode.stopAllActions();this.rootNode.getWidgetByTag(800).stopAllActions();var a=cc.BuilderReader.load("ccbi/ccb/PlayGameScene.ccbi");cc.Director.getInstance().replaceScene(a)};PlayGameScene.prototype.execGameOver=function(){var a=cc.DelayTime.create(qyp_guai_gameover_waitTime),b=cc.CallFunc.create(this.gameOverFun,this,2),a=cc.Sequence.create(a,b);this.rootNode.runAction(a)};
PlayGameScene.prototype.gameOverFun=function(a,b){this.stopAllGuaiAction();this.rootNode.unscheduleUpdate();this.rootNode.stopAllActions();qyp_game_zongMoney=this.zhuanquMoney;var c=new GameOverScene;this.addChild(c,700)};
PlayGameScene.prototype.startFashePaodan=function(){this.rootNode.stopActionByTag(ActionTag_PlayGameScene_lianxuFashePaodan);this.isPaodanJiangeYunxu&&qyp_game_qiang_qi<qyp_qi_max&&this.fasheZidan(this.touchPot);if(this.isLianxuFashe){var a=cc.DelayTime.create(0.05),b=cc.CallFunc.create(this.startFashePaodanFinishFun,this,10),a=cc.RepeatForever.create(cc.Sequence.create(a,b));a.setTag(ActionTag_PlayGameScene_lianxuFashePaodan);this.rootNode.runAction(a)}};
PlayGameScene.prototype.jianQiangqiFun=function(a,b){if(!this.isLianxuFashe){var c=!0;qyp_game_qiang_qi==qyp_qi_max&&(this.jianqiCishu+=1,4>=this.jianqiCishu&&(c=!1));c&&(c=qyp_game_qiang_qi-qyp_qi_jian,0>c&&(c=0),qyp_game_qiang_qi=c,this.updateQiangqiView(),this.jianqiCishu=0)}};PlayGameScene.prototype.updateQiangqiView=function(){var a=qyp_qi_view_pyX*(qyp_game_qiang_qi/qyp_qi_max);a>qyp_qi_view_pyX&&(a=qyp_qi_view_pyX);this.qiangQiSprite.setPosition(39+a,this.qiangQiStartPot.y)};
PlayGameScene.prototype.startFashePaodanFinishFun=function(a,b){this.isLianxuFashe?this.isPaodanJiangeYunxu&&qyp_game_qiang_qi<qyp_qi_max&&this.fasheZidan(this.touchPot):this.rootNode.stopActionByTag(ActionTag_PlayGameScene_lianxuFashePaodan)};
PlayGameScene.prototype.fasheZidan=function(a){playArmature(this.duizhangArmatureUp,2);var b=this.duizhangLayer.getPosition();a=getnAngleByPot(b,a);var c=cc.RotateTo.create(0.01,a);this.duizhangArmatureUp.runAction(c);c=qyp_qiang_addQi1;switch(this.qiangDengji){case 1:c=qyp_qiang_addQi1;break;case 2:c=qyp_qiang_addQi2;break;case 3:c=qyp_qiang_addQi3;break;case 4:c=qyp_qiang_addQi4;break;case 5:c=qyp_qiang_addQi5}c=qyp_game_qiang_qi+c;c>qyp_qi_max&&(c=qyp_qi_max);qyp_game_qiang_qi=c;this.updateQiangqiView();
if(3!=this.qiangDengji)var c=this.getCreatePaodanPot(b.x,b.y,65,a),d=this.getCreatePaodanPot(b.x,b.y,480,a);else{c=this.getCreatePaodanPot(b.x,b.y,65,a);d=this.getCreatePaodanPot(b.x,b.y,480,a);this.createPaodan(c,d,a);var e=10,c=this.getCreatePaodanPot(b.x,b.y,65,a+e),d=this.getCreatePaodanPot(b.x,b.y,480,a+e);this.createPaodan(c,d,a);e*=-1;c=this.getCreatePaodanPot(b.x,b.y,65,a+e);d=this.getCreatePaodanPot(b.x,b.y,480,a+e)}this.createPaodan(c,d,a)};
PlayGameScene.prototype.setPaodanData=function(a){var b=null,c=null,d=null;switch(this.qiangDengji){case 1:b=qyp_qiang_gongji1;qyp_game_zongKill<=qyp_qiang_gongji1_start_kill_count&&(b=qyp_qiang_gongji1_start);d=qyp_qiang_sudu1;c=qyp_qiang_waitTime1;break;case 2:b=qyp_qiang_gongji2;d=qyp_qiang_sudu2;c=qyp_qiang_waitTime2;break;case 3:b=qyp_qiang_gongji3;d=qyp_qiang_sudu3;c=qyp_qiang_waitTime3;break;case 4:b=qyp_qiang_gongji4;d=qyp_qiang_sudu4;c=qyp_qiang_waitTime4;break;case 5:b=qyp_qiang_gongji5,
d=qyp_qiang_sudu5,c=qyp_qiang_waitTime5}a.pCustomData.gongji=b;a.pCustomData.dengji=this.qiangDengji;a.pCustomData.waitTime=c;a.pCustomData.sudu=d};
PlayGameScene.prototype.createPaodan=function(a,b,c){this.isPaodanJiangeYunxu=!1;var d=s_kaiqiang1,e="zidan1.png";switch(this.qiangDengji){case 1:e="zidan1.png";d=s_kaiqiang1;break;case 2:e="zidan2.png";d=s_kaiqiang2;break;case 3:e="zidan3.png";d=s_kaiqiang3;break;case 4:e="zidan4.png";d=s_kaiqiang4;break;case 5:e="zidan5.png",d=s_kaiqiang5}playSound(d);d=MyCustomSprite.createWithSpriteFrameName(e);this.setPaodanData(d);d.setPosition(a);d.setRotation(c);this.rootNode.addChild(d,320);c=d.pCustomData.sudu;
a=1*distanceByPotAndPot(a,b)/c;b=cc.MoveTo.create(a,b);a=cc.CallFunc.create(this.moveFinishFun,this,10);b=cc.Sequence.create(b,a);d.runAction(b);b=cc.DelayTime.create(d.pCustomData.waitTime);a=cc.CallFunc.create(this.fashePaodanFinishWaitFun,this,10);b=cc.Sequence.create(b,a);this.rootNode.runAction(b);this.paodanArray.push(d)};PlayGameScene.prototype.fashePaodanFinishWaitFun=function(a,b){this.isPaodanJiangeYunxu=!0};
PlayGameScene.prototype.getCreatePaodanPot=function(a,b,c,d){var e=cc.p(0,0),e=Math.PI/180*(d+174);d=-1*c*Math.cos(e);c*=Math.sin(e);return e=cc.p(d+a,c+b)};
PlayGameScene.prototype.onTouchesBegan=function(a,b){cc.log("PlayGameScene.prototype.onTouchesBegan");this.touchPot=a[0].getLocation();!cc.Director.getInstance().isPaused()&&!this.isGameOver&&(this.zhunxingSprite.setPosition(cc.p(this.touchPot.x,this.touchPot.y+qyp_zhunxingPianyiY)),this.isLianxuFashe=!0,this.startFashePaodan(),this.isShowZhunxing=!0,this.zhunxingSprite.setVisible(!0))};
PlayGameScene.prototype.onTouchesMoved=function(a,b){cc.log("PlayGameScene.prototype.onTouchesMoved");this.touchPot=a[0].getLocation();cc.Director.getInstance().isPaused()||this.zhunxingSprite.setPosition(cc.p(this.touchPot.x,this.touchPot.y+qyp_zhunxingPianyiY))};PlayGameScene.prototype.onTouchesEnded=function(a,b){cc.log("PlayGameScene.prototype.onTouchesEnded");cc.Director.getInstance().isPaused();this.isShowZhunxing=this.isLianxuFashe=!1;this.zhunxingSprite.setVisible(!1)};
PlayGameScene.prototype.onMouseDragged=function(a){};PlayGameScene.prototype.onAccelerometer=function(a){cc.log("PlayGameScene.prototype.onAccelerometer")};PlayGameScene.prototype.isBeijizhong=function(a){for(var b=this.paodanArray.length,c=0;c<b;c++){var d=this.paodanArray[c];!d.pCustomData.isDead&&!a.pCustomData.isDead&&cc.rectContainsPoint(a.getBoundingBox(),d.getPosition())&&(!a.pCustomData.isYijingGongji||!a.pCustomData.isFly)&&this.mingzhongGuai(a,d)}};
PlayGameScene.prototype.execUpdateDelete=function(){for(var a=this.removeGuaiArray.length,b=0;b<a;b++){var c=this.removeGuaiArray[b];this.guaiArray.remove(c);c.pCustomData.hpSprite.removeFromParent(!0);c.pCustomData.hpDituSprite.removeFromParent(!0);c.removeFromParent(!0)}this.removeGuaiArray.clear();a=this.removePaodanArray.length;for(b=0;b<a;b++)c=this.removePaodanArray[b],this.paodanArray.remove(c),c.removeFromParent(!0);this.removePaodanArray.clear()};
PlayGameScene.prototype.onUpdate=function(a){this.execUpdateDelete();if(!this.isGameOver){a=this.guaiArray.length;for(var b=0;b<a;b++){var c=this.guaiArray[b];if(!c.pCustomData.isDead){var d=this.getHpPoint(c);c.pCustomData.hpSprite.setPosition(d);c.pCustomData.hpDituSprite.setPosition(d);this.isBeijizhong(c)}}}};
PlayGameScene.prototype.onGongjiUpdate=function(a){if(this.isShowZhunxing&&!this.isGameOver){a=this.guaiArray.length;for(var b=null,c=0;c<a;c++){var d=this.guaiArray[c];if(!d.pCustomData.isDead){var e=getSpriteRect(this.zhunxingSprite),f=getSpriteRect(d);f.y+=f.height/2;cc.rectIntersectsRect(e,f)&&(null==b?b=d:b.getZOrder()<d.getZOrder()&&(b=d))}}}};PlayGameScene.prototype.onResizeViewUpdate=function(a){retrySizeView()};
PlayGameScene.prototype.guaiGongjiWancheng=function(a){if(!a.pCustomData.isDead){var b=2;if(a.pCustomData.isFly){b=1;a.pCustomData.isYijingGongji=!0;var c=a.getPosition(),d=cc.p(-50,c.y),c=distanceByPotAndPot(c,d)/a.pCustomData.sudu,d=cc.MoveTo.create(c,d),b=cc.CallFunc.create(this.gongjiWanchengFun,this,b)}else playArmature(a,0),b=2,a.pCustomData.isYijingGongji=!0,d=cc.DelayTime.create(qyp_gongji_waitTime),b=cc.CallFunc.create(this.guaiGongjiFun,this,b);b=cc.Sequence.create(d,b);a.runAction(b)}};
PlayGameScene.prototype.gongjiWanchengFun=function(a,b){a.pCustomData.isPass=!0;this.killGuai(a)};
PlayGameScene.prototype.animationEvent=function(a,b,c){b!=ccs.MovementEventType.loopComplete&&(b==ccs.MovementEventType.start?"gongji"==c&&!a.pCustomData.isDead&&(a.pCustomData.isYijingGongji=!0):b==ccs.MovementEventType.complete&&("gongji"==c?a.pCustomData.isDead||(this.startGuaiGongji(a),this.guaiGongjiWancheng(a)):"kaiqiang"==c?a.pCustomData.isDead||playArmature(a,0):"dead"==c&&a.pCustomData.isDead&&this.killGuaiWancheng(a)))};
var CCBMainPlayGameScene=cc.Scene.extend({ctor:function(){this._super();cc.BuilderReader.setResolutionScale(1);var a=cc.BuilderReader.load("ccbi/ccb/PlayGameScene.ccbi");this.addChild(a);this.setPosition(cc.p(0,0))}});